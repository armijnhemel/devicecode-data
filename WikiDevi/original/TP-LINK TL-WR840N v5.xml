<page>
    <title>TP-LINK TL-WR840N v5</title>
    <ns>0</ns>
    <id>73009</id>
    <revision>
      <id>372365</id>
      <parentid>372196</parentid>
      <timestamp>2020-10-23T23:00:22Z</timestamp>
      <contributor>
        <username>Omega</username>
        <id>24</id>
      </contributor>
      <comment>fixed ;</comment>
      <origin>372365</origin>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text bytes="31512" sha1="3unmj7hglxnxhzckz616i7v11eqvybq" xml:space="preserve">{{Wireless embedded system
|brand=TP-LINK
|model=TL-WR840N
|revision=v5 (ES/EU)
|series=N300
|asin=
|manuf_country=China
|is_manuf=Yes
|availability=now
|fcc_date=02/07/2017
|fcc_id=TE7WR845NV3
|pcb_id=2050500852
|type=wireless router
|pwr_v=9
|pwr_amp=0.6
|pwr_conn=barrel
|cpu1_brand=MediaTek
|cpu1_model=MT7628N;MEDIATEK, MT7628NN, 1710-AJCSL, EAP0X331;
|cpu1_cspeed=575
|fla1=4
|fla1_brand=GigaDevice
|fla1_model=GD25Q32
|ram1=64
|ram1_brand=ESMT
|ram1_model=M14D5121632A
|expansion_if_types=
|expansion_usb_num=
|jtag=
|serial=
|wi1_chip1_brand=MediaTek
|wi1_chip1_model=MT7628N;MEDIATEK, MT7628NN, 1710-AJCSL, EAP0X331;
|wi1_802dot11_protocols=bgn
|wi1_ant_conn=
|wi1_txchains=2
|wi1_rxchains=2
|wi1_sstreams=2
|eth_none=
|eth_cpu=true
|sw_cpu=true
|lan_speed=100M
|lan_ports=4
|wan_speed=100M
|wan_ports=1
|addl_chips=
|flags=
|stock_boot=U-Boot;1.1.3;Ralink 4.3.0.0;
|stock_os=Linux;2.6.36;
|tp_firmware=LEDE Project, OpenWrt
|802dot11_protocols=bgn
|default_ssid=TP-LINK_XXXX
|default_ip=192.168.0.1
|default_user=admin
|default_pass=admin
|oui=70:4F:57
|oui_eth=70:4F:57
}}
{{TagLine|300Mbps Wireless Router}}
:[http://www.tp-link.com/en/products/details/TL-WR840N.html Product page] {{•}} [http://www.tp-link.com/en/download/TL-WR840N.html Support page] {{•}} [https://emulator.tp-link.com/Emulator_TL-WR840NV5(EU)/index.htm Demo UI]

*&quot;2050500852&quot; and &quot;1712&quot; is silkscreened on the board. 
*&quot;2050500909&quot; and &quot;10558&quot; add 4-digit date for TL-WR840N(RU) Ver:5.0
{{see also|TP-LINK TL-WR840N v4|TP-LINK TL-WR845N v3.x}}

===Forum threads===
*[https://forum.lede-project.org/t/support-for-tl-wr840n-es-ver-5-0-eu/6281/5 ''Support for TL-WR840N (ES) Ver 5.0 (EU)'' on '''LEDE''' forums]
:*[[TP-LINK TL-WR840N v4]]
::CPU: [[MediaTek]] MT7628NN @575MHz
::Flash: ''GigaDevice'' GD25Q64B (8MB)
::RAM: ''Winbond'' W9751G6KB-25 (64MB)
:*[[TP-LINK TL-WR840N v5]]
::CPU: [[MediaTek]] MT7628NN @575MHz
::Flash: ''GigaDevice'' GD25Q32B (4MB) 
::or ''GigaDevice'' GD25Q32CSIG (4MB)
::RAM: ''ESMT'' M14D5121632A (64MB)
:*[[TP-LINK TL-WR840N v6]]
::CPU: [[MediaTek]] MT7628NN @575MHz
::Flash: ''GigaDevice'' GD25Q32C (4MB)
::RAM: ''Zentel'' A3S56D40GTP (32MB)
&lt;!--840V4
CPU: MEDIATEK MT7628NN, 1706-AJCSL, EAP0W363
RAM: 512Mbit WINBOND W9751G6KB-25
840V5
CPU: MEDIATEK MT7628NN, 1710-AJCSL, EAP0X331
RAM: 512Mbit ESMT M14D5121632A
840V6
CPU: MEDIATEK MT7628NN, 1804-AJCSL, EAP1B904
RAM: 256Mbit Zentel A3S56D40GTP

*[https://4pda.ru/forum/index.php?showtopic=786959&amp;st=860 ''TP-LINK TL-WR840N v5'' on '''4pda''' forums] (RU)--&gt;
&lt;small&gt;&lt;pre&gt;
root@LEDE:~# cat /proc/cpuinfo 
system type	: MediaTek MT7628AN ver:1 eco:2
machine		: TP-Link TL-WR840N v5
processor	: 0
cpu model	: MIPS 24KEc V5.5
BogoMIPS	: 385.84
wait instruction	: yes
microsecond timers	: yes
tlb_entries		: 32
extra interrupt vector	: yes
hardware watchpoint	: yes, count: 4, 
address/irw mask: [0x0ffc, 0x0ffc, 0x0ffb, 0x0ffb]
isa	: mips1 mips2 mips32r1 mips32r2
ASEs implemented	: mips16 dsp
shadow register sets	: 1
kscratch registers	: 0
package	: 0
core	: 0
VCED exceptions	: not available
VCEI exceptions	: not available

root@LEDE:~# free
total used free shared buffers cached
Mem: 60608 24052 36556 520 2288 7636
-/+ buffers/cache: 14128 46480
Swap: 0 0 0
root@LEDE:~# df -h
Filesystem Size Used Available Use% Mounted on
/dev/root 2.5M 2.5M 0 100% /rom
tmpfs 29.6M 460.0K 29.1M 2% /tmp
tmpfs 29.6M 60.0K 29.5M 0% /tmp/root
overlayfs:/tmp/root 29.6M 60.0K 29.5M 0% /
tmpfs 512.0K 0 512.0K 0% /dev
&lt;/pre&gt;&lt;/small&gt;

{{SCollapse|Bootlog • &gt;&gt;
|&lt;small&gt;&lt;pre&gt;
[04040D07][04040C0E]
DDR Calibration DQS reg = 00008989

U-Boot 1.1.3 (May  5 2017 - 11:42:04)
Board: Ralink APSoC DRAM:  64 MB
relocate_code Pointer at: 83fb8000
gpiomode2 05540554.
gpiomode2 00000000.
gpiomode2 05550555.
flash manufacture id: c8, device id 40 16
find flash: GD25Q32B
============================================
Ralink UBoot Version: 4.3.0.0
--------------------------------------------
ASIC 7628_MP (Port5&lt;-&gt;None)
DRAM component: 512 Mbits DDR, width 16
DRAM bus: 16 bit
Total memory: 64 MBytes
Flash component: SPI Flash
Date:May  5 2017  Time:11:42:04
============================================
icache: sets:512, ways:4, linesz:32 ,total:65536
dcache: sets:256, ways:4, linesz:32 ,total:32768

 ##### The CPU freq = 580 MHZ ####
 estimate memory size =64 Mbytes
RESET MT7628 PHY!!!!!!
continue to starting system.                                                                                                                                  0
disable switch phyport...

3: System Boot system code via Flash.(0xbc020000)
do_bootm:argc=2, addr=0xbc020000
## Booting image at bc020000 ...
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 8000c150) ...
## Giving linux memsize in MB, 64

Starting kernel ...

Linux version 2.6.36 (tomcat@buildserver) (gcc version 4.6.3 (Buildroot 2012.11.1) ) #1 Fri May 5 11:46:38 CST 2017

 The CPU feqenuce set to 575 MHz

 MIPS CPU sleep mode enabled.
CPU revision is: 00019655 (MIPS 24Kc)
Software DMA cache coherency
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: console=ttyS1,115200 root=/dev/mtdblock2 rootfstype=squashfs init=/sbin/init
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 64kB, VIPT, , 4-waylinesize 32 bytes.
Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=00030f45
Readback ErrCtl register=00030f45
Memory: 61604k/65536k available (2266k kernel code, 3932k reserved, 602k data, 160k init, 0k highmem)
NR_IRQS:128
console [ttyS1] enabled
Calibrating delay loop... 386.04 BogoMIPS (lpj=772096)
pid_max: default: 4096 minimum: 301
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
Switching to clocksource Ralink Systick timer
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
msgmni has been set to 120
io scheduler noop registered
io scheduler deadline registered (default)
Ralink gpio driver initialized
i2cdrv_major = 218
Serial: 8250/16550 driver, 2 ports, IRQ sharing enabled
serial8250: ttyS0 at MMIO 0x10000d00 (irq = 21) is a 16550A
serial8250: ttyS1 at MMIO 0x10000c00 (irq = 20) is a 16550A
brd: module loaded
flash manufacture id: c8, device id 40 16
GD25Q32B(c8 40160000) (4096 Kbytes)
mtd .name = raspi, .size = 0x00400000 (4M) .erasesize = 0x00010000 (64K) .numeraseregions = 0
Creating 5 MTD partitions on &quot;raspi&quot;:
0x000000000000-0x000000020000 : &quot;boot&quot;
0x000000020000-0x000000120000 : &quot;kernel&quot;
0x000000120000-0x0000003e0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
0x0000003e0000-0x0000003f0000 : &quot;config&quot;
0x0000003f0000-0x000000400000 : &quot;radio&quot;
Register flash device:flash0
PPP generic driver version 2.4.2
PPP MPPE Compression module registered
NET: Registered protocol family 24
Mirror/redirect action on
u32 classifier
    Actions configured
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (962 buckets, 3848 max)
ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Linux
TCP cubic registered
NET: Registered protocol family 10
ip6_tables: (C) 2000-2006 Netfilter Core Team
IPv6 over IPv4 tunneling driver
NET: Registered protocol family 17
Ebtables v2.0 registered
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
SQUASHFS error: Xattrs in filesystem, these will be ignored
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 160k freed
starting pid 29, tty '': '/etc/init.d/rcS'
cp: can't stat '/etc/SingleSKU_FCC.dat': No such file or directory
rdm_major = 253
spiflash_ioctl_read, Read from 0x003ff100 length 0x6, ret 0, retlen 0x6
Read MAC from flash(  3ff100) 70-4f-57-30-ffffff85-ffffffa6
GMAC1_MAC_ADRH -- : 0x0000704f
GMAC1_MAC_ADRL -- : 0x573085a6
Ralink APSoC Ethernet Driver Initilization. v3.1  256 rx/tx descriptors allocated, mtu = 1500!
NAPI enable, Tx Ring = 256, Rx Ring = 256
spiflash_ioctl_read, Read from 0x003ff100 length 0x6, ret 0, retlen 0x6
Read MAC from flash(  3ff100) 70-4f-57-30-ffffff85-ffffffa6
GMAC1_MAC_ADRH -- : 0x0000704f
GMAC1_MAC_ADRL -- : 0x573085a6
PROC INIT OK!
add domain:tplinkwifi.net
add domain:tplinkap.net
add domain:tplinkrepeater.net
add domain:tplinklogin.net
tp_domain init ok
L2TP core driver, V2.0
PPPoL2TP kernel driver, V2.0
Set: phy[0].reg[0] = 3900
Set: phy[1].reg[0] = 3900
Set: phy[2].reg[0] = 3900
Set: phy[3].reg[0] = 3900
Set: phy[4].reg[0] = 3900
Set: phy[0].reg[0] = 3300
Set: phy[1].reg[0] = 3300
Set: phy[2].reg[0] = 3300
Set: phy[3].reg[0] = 3300
Set: phy[4].reg[0] = 3300
resetMiiPortV over.
starting pid 64, tty '/dev/ttyS1': '/bin/sh'
~ # [ util_execSystem ] 139:  ipt_init cmd is &quot;/var/tmp/dconf/rc.router&quot;

[ dm_readFile ] 2061:  can not open xml file /var/tmp/pc/reduced_data_model.xml!, about to open file /etc/reduced_data_model.xml
spiflash_ioctl_read, Read from 0x003e0000 length 0x10000, ret 0, retlen 0x10000
spiflash_ioctl_read, Read from 0x003e0000 length 0x9973, ret 0, retlen 0x9973
===&gt;Enter Routerspiflash_ioctl_read, Read from 0x003ff100 length 0x6, ret 0, retlen 0x6
 mode
spiflash_ioctl_read, Read from 0x003ff200 length 0x4, ret 0, retlen 0x4
spiflash_ioctl_read, Read from 0x003ff300 length 0x4, ret 0, retlen 0x4
spiflash_ioctl_read, Read from 0x003ff400 length 0x10, ret 0, retlen 0x10
spiflash_ioctl_read, Read from 0x003ff500 length 0x29, ret 0, retlen 0x29
spiflash_ioctl_read, Read from 0x003ff600 length 0x21, ret 0, retlen 0x21
spiflash_ioctl_read, Read from 0x003ff700 length 0x10, ret 0, retlen 0x10
spiflash_ioctl_read, Read from 0x00020000 length 0x1d0, ret 0, retlen 0x1d0
spiflash_ioctl_read, Read from 0x003ff100 length 0x6, ret 0, retlen 0x6
sendto: No such file or directory
pid 63 send 2001 error
[ util_execSystem ] 139:  oal_startDynDns cmd is &quot;dyndns /var/tmp/dconf/dyndns.conf&quot;

[ oal_sys_getOldTZInfo ] 449:  Open TZ file error!
[ util_execSystem ] 139:  oal_sys_unsetTZ cmd is &quot;echo &quot;&quot; &gt; /etc/TZ&quot;

[ util_execSystem ] 139:  oal_sys_unsetTZ cmd is &quot;echo &quot;&quot; &gt; /etc/TZ&quot;

[ util_execSystem ] 139:  oal_startNoipDns cmd is &quot;noipdns /var/tmp/dconf/noipdns.conf&quot;

[ util_execSystem ] 139:  oal_startCmxDns cmd is &quot;cmxdns /var/tmp/dconf/cmxdns.conf&quot;

ioctl: No such device
[ util_execSystem ] 139:  oal_br_addBridge cmd is &quot;brctl addbr br0;brctl setfd br0 0;brctl stp br0 off&quot;

[ util_execSystem ] 139:  oal_ipt_addLanRules cmd is &quot;iptables -t filter -A INPUT -i br+ -j ACCEPT
&quot;

[ util_execSystem ] 139:  oal_intf_setIntf cmd is &quot;ifconfig br0 192.168.1.1 netmask 255.255.255.0 up&quot;

[ util_execSystem ] 139:  oal_util_setProcLanAddr cmd is &quot;echo &quot;br0 16885952,&quot; &gt; /proc/net/conRaeth v3.1 (ntract_LocalAddrNAPI
&quot;

[ util_exec,SkbRecycleSystem ] 139:  o)
al_intf_enableIn
phy_tx_ring = 0x03688000, tx_ring = 0xa3688000
tf cmd is &quot;ifcon
phy_rx_ring0 = 0x03689000, rx_ring0 = 0xa3689000
fig eth0 up&quot;

[fe_sw_init:4983]rt305x_esw_init.
disable switch phyport...
GMAC1_MAC_ADRH -- : 0x0000704f
GMAC1_MAC_ADRL -- : 0x573085a6
RT305x_ESW: Link Status Changed
[ rsl_getUnusedVlan ] 1015:  GET UNUSED VLAN TAG 1 : [3]
[ rsl_getUnusedVlan ] 1015:  GET UNUSED VLAN TAG 2 : [4]
[ rsl_getUnusedVlan ] 1015:  GET UNUSED VLAN TAG 3 : [5]
[ rsl_getUnusedVlan ] 1015:  GET UNUSED VLAN TAG 4 : [6]
[ util_execSystem ] 139:  oal_addVlanTagIntf cmd is &quot;vconfig add eth0 3&quot;

[ util_execSystem ] 139:  oal_intf_enableIntf cmd is &quot;ifconfig eth0.3 up&quot;

set if eth0.3 to *not wan dev
[ util_execSystem ] 139:  oal_addVlanTagIntf cmd is &quot;vconfig add eth0 4&quot;

[ util_execSystem ] 139:  oal_intf_enableIntf cmd is &quot;ifconfig eth0.4 up&quot;

set if eth0.4 to *not wan dev
[ util_execSystem ] 139:  oal_addVlanTagIntf cmd is &quot;vconfig add eth0 5&quot;

[ util_execSystem ] 139:  oal_intf_enableIntf cmd is &quot;ifconfig eth0.5 up&quot;

set if eth0.5 to *not wan dev
[ util_execSystem ] 139:  oal_addVlanTagIntf cmd is &quot;vconfig add eth0 6&quot;

[ util_execSystem ] 139:  oal_intf_edevice eth0.3 entered promiscuous mode
nableIntf cmd isdevice eth0 entered promiscuous mode
 &quot;ifconfig eth0.br0: port 1(eth0.3) entering forwarding state
6 up&quot;

set if br0: port 1(eth0.3) entering forwarding state
eth0.6 to *not wan dev
[ util_execSystem ] 139:  oal_addVlanTagIntf cmd is &quot;vcodevice eth0.4 entered promiscuous mode
nfig add eth0 2&quot;br0: port 2(eth0.4) entering forwarding state


[ util_execSbr0: port 2(eth0.4) entering forwarding state
ystem ] 139:  oal_intf_enableIntf cmd is &quot;ifconfig eth0.2 up&quot;

set if eth0.2 tdevice eth0.5 entered promiscuous mode
o wan dev
[ vlabr0: port 3(eth0.5) entering forwarding state
n_addLanPortsIntbr0: port 3(eth0.5) entering forwarding state
oBridge ] 551:  add lan Port 247 from br0
[ util_execSystem ] 139:  oal_br_addIntfIntoBridge cmd is &quot;brctl addif br0 eth0.3&quot;

[ util_execSystem ] 139:  oal_br_addIntfIntoBridge cmd is &quot;brctl addif br0 eth0.4&quot;

[ util_execSystem ] 139:  oal_br_addIntfIntoBridge cmd is &quot;brctl addif br0 eth0.5&quot;

[ util_execSystem ] 139:  oal_vlan_createMacVlanIntf cmd is &quot;ip link add link eth0.2 name eth0.2_1 type macvlan&quot;

set if eth0.2_1 to wan dev
[ util_execSystem ] 139:  oal_br_addBridge cmd is &quot;brctl addbr briptv;brctl setfd briptv 0;brctl stp briptv off&quot;

[ util_execSystem ] 139:  oal_ipt_addLanRules cmd is &quot;iptables -t filter -A INPUT -i br+ -j ACCEPT
&quot;

[ util_execSystem ] 139:  oal_intf_enableIntf cmd is &quot;ifconfig briptv up&quot;

[ vlan_addLanPortsIntoBridge ] 551:  add lan Port 8 from bdevice eth0.6 entered promiscuous mode
riptv
[ util_exbriptv: port 1(eth0.6) entering forwarding state
ecSystem ] 139: briptv: port 1(eth0.6) entering forwarding state
 oal_br_addIntfIntoBridge cmd is &quot;brctl addif briptv eth0.6&quot;

[ util_execSystem ] 139:  oal_vlan_createMacVlanIntf cmd is &quot;ip link add link eth0.2 name eth0.2_2 type macvlan&quot;

set if eth0.2_2 to wan dev
[ util_execSystem ] 139:  oal_intf_enableIntf cmdevice eth0.2_2 entered promiscuous mode
d is &quot;ifconfig ebriptv: port 2(eth0.2_2) entering forwarding state
th0.2_2 up&quot;

[briptv: port 2(eth0.2_2) entering forwarding state
 util_execSystem ] 139:  oal_br_addIntfIntoBridge cmd is &quot;brctl addif briptv eth0.2_2&quot;

[ util_execSystem ] 139:  oal_br_markMulticastRouterPort cmd is &quot;echo 2 &gt; /sys/devices/virtual/net/eth0.2_2/brport/multicast_router&quot;

[ util_execSystem ] 139:  rsl_initIPv6CfgObj cmd is &quot;echo 1 &gt; /proc/sys/net/ipv6/conf/all/disable_ipv6&quot;

[ util_execSystem ] 139:  oal_eth_setIGMPSnoopParam cmd is &quot;for i in /sys/devices/virtual/net/*/bridge/multicast_snooping;do echo 1 &gt; $i ; done&quot;

[ util_execSystem ] 139:  oal_wlan_ra_setCountryRegion cmd is &quot;cp /etc/SingleSKU_CE.dat /var/Wireless/RT2860AP/SingleSKU.dat&quot;

[ util_execSystem ] 139:  oal_wlan_ra_setCountryRegion cmd is &quot;iwpriv ra0 set CountryRegion=1&quot;

ra0       no private ioctls.

[ util_execSystem ] 166:  execute ok, exit status = 255

[ util_execSystem ] 139:  oal_wlan_ra_loadDriver cmd is &quot;insmod /lib/modules/kmdir/kernel/drivers/net/wireless/mt_wifi_ap/mt_wifi.ko&quot;

ADDRCONF(NETDEV_CHANGE): eth0.4: link becomes ready
ADDRCONF(NETDEV_CHANGE): eth0.5: link becomes ready
ADDRCONF(NETDEV_CHANGE): eth0.6: link becomes ready
ADDRCONF(NETDEV_CHANGE): eth0.2: link becomes ready


=== pAd = c08af000, size = 1470664 ===

&lt;-- RTMPAllocTxRxRingMemory, Status=0, ErrorValue=0x
&lt;-- RTMPAllocAdapterBlock, Status=0
RtmpChipOpsHook(492): Not support for HIF_MT yet!
mt7628_init()--&gt;
mt7628_init(FW(8a00), HW(8a01), CHIPID(7628))
e2.bin mt7628_init(1156)::(2), pChipCap-&gt;fw_len(64560)
mt_bcn_buf_init(218): Not support for HIF_MT yet!
&lt;--mt7628_init()
[ util_execSystem ] 139:  oal_wlan_ra_initWlan cmd is &quot;ifconfig ra0 up&quot;

TX_BCN DESC a2864000 size = 320
RX[0] DESC a2867000 size = 1024
RX[1] DESC a2868000 size = 1024
RT_CfgSetApcliMacAddress : invalid mac setting
cfg_mode=9
cfg_mode=9
wmode_band_equal(): Band Equal!
AndesSendCmdMsg: Could not send in band command due to diable fRTMP_ADAPTER_MCU_SEND_IN_BAND_CMD
APSDCapable[0]=0
APSDCapable[1]=0
APSDCapable[2]=0
APSDCapable[3]=0
APSDCapable[4]=0
APSDCapable[5]=0
APSDCapable[6]=0
APSDCapable[7]=0
APSDCapable[8]=0
APSDCapable[9]=0
APSDCapable[10]=0
APSDCapable[11]=0
APSDCapable[12]=0
APSDCapable[13]=0
APSDCapable[14]=0
APSDCapable[15]=0
default ApCliAPSDCapable[0]=0
Key1Str is Invalid key length(0) or Type(0)
Key1Str is Invalid key length(0) or Type(0)
Key2Str is Invalid key length(0) or Type(0)
Key2Str is Invalid key length(0) or Type(0)
Key3Str is Invalid key length(0) or Type(0)
Key3Str is Invalid key length(0) or Type(0)
Key4Str is Invalid key length(0) or Type(0)
Key4Str is Invalid key length(0) or Type(0)
WscKeyASCII=8
WscKeyASCII=8
[RTMPReadParametersHook:297]wifi read profile faild.
load fw image from fw_header_image
AndesMTLoadFwMethod1(2263)::pChipCap-&gt;fw_len(64560)
FW Version:1
FW Build Date:20161213152835
CmdAddressLenReq:(ret = 0)
CmdFwStartReq: override = 1, address = 1048576
CmdStartDLRsp: WiFI FW Download Success
MtAsicDMASchedulerInit(): DMA Scheduler Mode=0(LMAC)
efuse_probe: efuse = 10000012
RtmpChipOpsEepromHook::e2p_type=2, inf_Type=4
RtmpEepromGetDefault::e2p_dafault=2
RtmpChipOpsEepromHook: E2P type(2), E2pAccessMode = 2, E2P default = 2
NVM is FLASH mode
1. Phy Mode = 14
exec!
spiflash_ioctl_read, Read from 0x003f0000 length 0x400, ret 0, retlen 0x400
eeFlashId = 0x7628!
Country Region from e2p = ffff
tssi_1_target_pwr_g_band = 36
2. Phy Mode = 14
3. Phy Mode = 14
NICInitPwrPinCfg(11): Not support for HIF_MT yet!
NICInitializeAsic(651): Not support rtmp_mac_sys_reset () for HIF_MT yet!
mt_mac_init()--&gt;
MtAsicInitMac()--&gt;
mt7628_init_mac_cr()--&gt;
MtAsicSetMacMaxLen(1277): Set the Max RxPktLen=450!
&lt;--mt_mac_init()
        WTBL Segment 1 info:
                MemBaseAddr/FID:0x28000/0
                EntrySize/Cnt:32/128
        WTBL Segment 2 info:
                MemBaseAddr/FID:0x40000/0
                EntrySize/Cnt:64/128
        WTBL Segment 3 info:
                MemBaseAddr/FID:0x42000/64
                EntrySize/Cnt:64/128
        WTBL Segment 4 info:
                MemBaseAddr/FID:0x44000/128
                EntrySize/Cnt:32/128
AntCfgInit(2940): Not support for HIF_MT yet!
MCS Set = ff ff 00 00 01
MtAsicSetChBusyStat(861): Not support for HIF_MT yet!
FW LOG: !!!! Pass, dont need recal (total fail[0])

FW LOG: !!!! Pass, dont need recal (total fail[0])

FW LOG: !!!! Pass, dont need recal (total fail[0])

FW LOG: RxDCOC Set DC Valid(8)(2)

CmdSlotTimeSet:(ret = 0)
[PMF]ap_pmf_init:: apidx=0, MFPC=0, MFPR=0, SHA256=0
[PMF]RTMPMakeRsnIeCap: RSNIE Capability MFPC=0, MFPR=0
[PMF]ap_pmf_init:: apidx=1, MFPC=0, MFPR=0, SHA256=0
MtAsicSetRalinkBurstMode(3048): Not support for HIF_MT yet!
MtAsicSetPiggyBack(796): Not support for HIF_MT yet!
reload DPD from flash , 0x9F = [ca00] doReload bit7[0]
CmdLoadDPDDataFromFlash: Channel = 4, DoReload = 0
MtAsicSetTxPreamble(3027): Not support for HIF_MT yet!
MtAsicAddSharedKeyEntry(1344): Not support for HIF_MT yet!
The 4-BSSID mode is enabled, the BSSID byte5 MUST be the multiple of 4
MtAsicSetPreTbtt(): bss_idx=0, PreTBTT timeout = 0xf0
ap_ftkd&gt; Initialize FT KDP Module...
Main bssid = 70:4f:57:30:85:a6
&lt;==== rt28xx_init, Status=0
@@@ ed_monitor_init : ===&gt;
@@@ ed_monitor_init : &lt;===
mt7628_set_ed_cca: TURN ON EDCCA mac 0x10618 = 0xd7c87d0f, EDCCA_Status=1
WiFi Startup Cost (ra0): 3.396s
[ util_execSystem ] 139:  oal_wlan_ra_initWlan cmd is &quot;echo 1 &gt; /proc/tplink/led_wlan_24G&quot;

[ util_execSystem ] 139:  oal_wlan_ra_setStaNum cmd is &quot;iwpriv ra0
====
@@@ ed_status_read: EDCCA TH - H
pAd-&gt;ed_trigger_cnt : 0 &gt; 20 ||  pAd-&gt;ed_big_rssi_stat : 0 &lt; 50
====
 set MaxStaNum=32&quot;

[ util_execSystem ] 139:  device ra0 entered promiscuous mode
oal_br_addIntfInbr0: port 4(ra0) entering forwarding state
toBridge cmd is br0: port 4(ra0) entering forwarding state
&quot;brctl addif br0 ra0&quot;

[ util_execSystem ] 139:  oal_br_addIntfIntoBridge cmd device apcli0 entered promiscuous mode
is &quot;brctl addif br0 apcli0&quot;

[ util_execSystem ] 139:  oal_br_addIntfIntoBridgdevice ra1 entered promiscuous mode
e cmd is &quot;brctl addif br0 ra1&quot;

[ util_execSystem ] 139:  oal_wlan_ra_initEnd spiflash_ioctl_read, Read from 0x003f0000 length 0x2, ret 0, retlen 0x2
cmd is &quot;wlNetlinkTool &amp;&quot;

[ util_execSystem ] 139:  oal_wlan_ra_initEnd cmd is &quot;killall -q wscd&quot;

[ util_execSystem ] 166:  execute ok, exit status = 1

[ util_execSystem ] 139:  oal_wlan_ra_initEnd cmd is &quot;wscd -i ra0 -m 1 -w /var/tmp/wsc_upnp/ &amp;&quot;

[ util_execSystem ] 139:  rsl_initLanWlanObj cmd is &quot;echo 0 &gt; /proc/tplink/wl_mode&quot;

[ oal_wlan_ra_loadDriver ] 1905:  no 5G chip.


[ rsl_initLanWlanObj ] 8575:  perror:1
WLAN-Start wlNetlinkTool
Waiting for Wireless Events from interfaces...
swWlanChkAhbErr: netlink to do
wscd: SSDP UDP PORT = 1900
sendto: No such file or directory
pid 63 send 2030 error
sendto: No such file or directory
pid 63 send 2004 error
[ util_execSystem ] 139:  oal_startDhcps cmd is &quot;dhcpd /var/tmp/dconf/udhcpd.conf&quot;

[ util_execSystem ] 139:  oal_ipt_addDnsRules cmd is &quot;iptables -t nat -A PREROUTING -d 192.168.1.1 -p udp --dport 53            -j DNAT --to-destination 92.62.144.130
&quot;

[ util_execSystem ] 139:  oal_net_addDNS cmd is &quot;echo &quot;nameserver 92.62.144.130&quot; &gt; /var/tmp/resolv.conf&quot;

[ util_execSystem ] 139:  oal_ipt_cleanYandexSDnsRules cmd is &quot;iptables -t nat -F PREROUTING_YDNS &quot;

[ util_execSystem ] 139:  oal_lan6_startDhcp6s cmd is &quot;dhcp6s -c /var/tmp/dconf/dhcp6s_br0.conf -P /var/run/dhcp6s_br0.pid br0 &amp;&quot;

iptables: Bad rule (does a matching rule exist in that chain?).
[ util_execSystem ] 139:  oal_lan6_startRadvd cmd is &quot;radvd -C /var/tmp/dconf/radvd_br0.conf -p /var/run/radvd_br0.pid &amp;&quot;

[ modifyL2BridgingFromLantoWan ] 148:  Fail to get LANDevice object (eth0.2_1), ret = 9806
[ rsl_initEwanObj ] 303:  Initialize EWAN failed!
[ util_execSystem ] 139:  oal_intf_setIfMac cmd is &quot;ifconfig eth0.2_1 down&quot;

[ util_execSystem ] 139:  oal_intf_setIfMac cmd is &quot;ifconfig eth0.2_1 hw ether 70:4F:57:30:85:A7 up&quot;

[ util_execSystem ] 139:  oal_intf_enableIntf cmd is &quot;ifconfig eth0.2_1 up&quot;

[ util_execSystem ] 139:  oal_intf_enableIntf cmd is &quot;ifconfig eth0.2_1 up&quot;

[ util_execSystem ] 139:  oal_wan_initPPPoE cmd is &quot;pppd pppoe  unit 2  eth0.2_1  username_len 6  password_len 9  persist nodetach  mru 1480 mtu 1480  usepeerdns  lcp-echo-interval 0  lcp-echo-failure 0  &amp;&quot;

pppoe_init() success
PPPoE DevName Hook, the name is eth0.2_1
PPPoE DevName Hook, the name is eth0.2_1
radvd starting
[Jan 01 03:00:09] radvd: no linklocal address configured for br0
[Jan 01 03:00:09] radvd: error parsing or activating the config file: /var/tmp/dconf/radvd_br0.conf
[ rsl_initAppObj ] 743:  ==&gt; start dhcp client

[ util_execSystem ] 139:  oal_ipt_fwDdos cmd is &quot;iptables -D FORWARD -j FIREWALL_DDOS
&quot;

iptables: No chain/target/match by that name.
[ util_execSystem ] 166:  execute ok, exit status = 1

[ util_execSystem ] 139:  oal_ipt_forbidLanPing cmd is &quot;iptables -t filter -D INPUT -i br+ -p icmp --icmp-type echo-request -j DROP
iptables -t filter -D FORWARD -i br+ -p icmp --icmp-type echo-request -j DROP
&quot;

iptables: Bad rule (does a matching rule exist in that chain?).
iptables: Bad rule (does a matching rule exist in that chain?).
[ util_execSystem ] 166:  execute ok, exit status = 1

[ util_execSystem ] 139:  oal_ddos_delPingRule cmd is &quot;iptables -t filter -D INPUT ! -i br+ -p icmp --icmp-type echo-request -j ACCEPT
&quot;

iptables: Bad rule (does a matching rule exist in that chain?).
[ util_execSystem ] 166:  execute ok, exit status = 1

[ util_execSystem ] 139:  oal_ipt_setDDoSRules cmd is &quot;iptables -F FIREWALL_DDOS&quot;

[ util_execSystem ] 139:  ddos_clearAll cmd is &quot;rm -f /var/tmp/dosHost&quot;

sh: diagTool: not found
[ util_execSystem ] 139:  oal_initFirewallObj cmd is &quot;ebtables -N FIREWALL&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -F&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -X&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -P INPUT ACCEPT&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -P FORWARD DROP&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -P OUTPUT ACCEPT&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -N FIREWALL&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -N FWRULE&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -N SETMSS&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -A INPUT -i lo -p ALL -j ACCEPT -m comment                                   --comment &quot;loop back&quot;&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -A INPUT  -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -A INPUT -i br+ -p tcp --dport 23 -j ACCEPT&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -A INPUT -p tcp --dport 23 -j DROP&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -A INPUT -i br+ -p icmpv6 --icmpv6-type echo-request -j ACCEPT&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -A INPUT -p icmpv6 --icmpv6-type echo-request -j DROP&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -A FORWARD -i br+ -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -A FORWARD -o br+ -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -A FORWARD -j FIREWALL&quot;

[ util_execSystem ] 139:  oal_initIp6FirewallObj cmd is &quot;ip6tables -I FORWARD 1 -j SETMSS&quot;

[ util_execSystem ] 139:  oal_fw6_setFwEnabeld cmd is &quot;ip6tables -D FIREWALL -j ACCEPT&quot;

ip6tables: Bad rule (does a matching rule exist in that chain?).
[ util_execSystem ] 166:  execute ok, exit status = 1

[ util_execSystem ] 139:  oal_fw6_setFwEnabeld cmd is &quot;ip6tables -F FIREWALL&quot;

[ util_execSystem ] 139:  oal_fw6_setFwEnabeld cmd is &quot;ip6tables -A FIREWALL -j ACCEPT&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/netfilter/nf_conntrack_ftp.ko&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/ipv4/netfilter/nf_nat_ftp.ko&quot;

[ util_execSystem ] 139:  oal_openAlg cmd is &quot;iptables -D FORWARD_VPN_PASSTHROUGH  -p udp --dport 500 -j DROP&quot;

iptables: Bad rule (does a matching rule exist in that chain?).
[ util_execSystem ] 166:  execute ok, exit status = 1

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/ipv4/netfilter/nf_nat_proto_gre.ko&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/ipv4/netfilter/nf_nat_pptp.ko&quot;

[ util_execSystem ] 139:  oal_openAlg cmd is &quot;iptables -D FORWARD_VPN_PASSTHROUGH  -p tcp --dport 1723 -j DROP&quot;

iptables: Bad rule (does a matching rule exist in that chain?).
[ util_execSystem ] 166:  execute ok, exit status = 1

[ util_execSystem ] 139:  oal_openAlg cmd is &quot;iptables -D FORWARD_VPN_PASSTHROUGH  -p udp --dport 1701 -j DROP&quot;

iptables: Bad rule (does a matching rule exist in that chain?).
[ util_execSystem ] 166:  execute ok, exit status = 1

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/netfilter/nf_conntrack_tftp.ko&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/ipv4/netfilter/nf_nat_tftp.ko&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/netfilter/nf_conntrack_h323.ko&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/ipv4/netfilter/nf_nat_h323.ko&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/netfilter/nf_conntrack_sip.ko&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/ipv4/netfilter/nf_nat_sip.ko&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/netfilter/nf_conntrack_rtsp.ko&quot;

[ util_execSystem ] 139:  setupModules cmd is &quot;insmod /lib/modules/kmdir/kernel/net/ipv4/netfilter/nf_nat_rtsp.ko&quot;

nf_nat_rtsp v0.6.21 loading
enable switch phyport...
Set: phy[0].reg[0] = 3900
Set: phy[1].reg[0] = 3900
Set: phy[2].reg[0] = 3900
Set: phy[3].reg[0] = 3900
Set: phy[4].reg[0] = 3900
Set: phy[0].reg[0] = 3300
Set: phy[1].reg[0] = 3300
Set: phy[2].reg[0] = 3300
Set: phy[3].reg[0] = 3300
Set: phy[4].reg[0] = 3300
resetMiiPortV over.
[cmd_dutInit():697] init shm
[tddp_taskEntry():151] tddp task start
[ util_execSystem ] 139:  prepareDropbear cmd is &quot;dropbearkey -t rsa -f /var/tmp/dropbear/dropbear_rsa_host_key&quot;

Will output 1024 bit rsa secret key to '/var/tmp/dropbear/dropbear_rsa_host_key'
Generating key, this may take a while...
[ util_execSystem ] 139:  prepareDropbear cmd is &quot;dropbearkey -t dss -f /var/tmp/dropbear/dropbear_dss_host_key&quot;

Will output 1024 bit dss secret key to '/var/tmp/dropbear/dropbear_dss_host_key'
Generating key, this may take a while...
[ util_execSystem ] 139:  oal_sys_unsetTZ cmd is &quot;echo &quot;&quot; &gt; /etc/TZ&quot;

[ util_execSystem ] 139:  oal_sys_unsetTZ cmd is &quot;echo &quot;&quot; &gt; /etc/TZ&quot;

[ util_execSystem ] 139:  prepareDropbear cmd is &quot;dropbear -p 22 -r /var/tmp/dropbear/dropbear_rsa_host_key -d /var/tmp/dropbear/dropbear_dss_host_key -A /var/tmp/dropbear/dropbearpwd&quot;

Primary DNS server Is Down... Switching To Secondary DNS server
[ util_execSystem ] 139:  oal_ipt_addDnsRules cmd is &quot;iptables -t nat -A PREROUTING -d 192.168.1.1 -p udp --dport 53            -j DNAT --to-destination 192.168.1.1
&quot;

[ util_execSystem ] 139:  oal_net_addDNS cmd is &quot;echo &quot;nameserver 192.168.1.1&quot; &gt; /var/tmp/resolv.conf&quot;

[ util_execSystem ] 139:  oal_ipt_delDnsRules cmd is &quot;iptables -t nat -D PREROUTING -d 192.168.1.1 -p udp --dport 53            -j DNAT --to-destination 92.62.144.130
&quot;

[ util_execSystem ] 139:  oal_sys_disableInternetLed cmd is &quot;echo &quot;0 0&quot; &gt; /proc/tplink/led_internet&quot;

[ util_execSystem ] 139:  oal_ipt_delDnsRules cmd is &quot;iptables -t nat -D PREROUTING -d 192.168.1.1 -p udp --dport 53            -j DNAT --to-destination 192.168.1.1
&quot;

[ util_execSystem ] 139:  oal_sys_disableInternetLed cmd is &quot;echo &quot;0 0&quot; &gt; /proc/tplink/led_internet&quot;

[ util_execSystem ] 139:  oal_sys_disableInternetLed cmd is &quot;echo &quot;0 0&quot; &gt; /proc/tplink/led_internet&quot;

[ util_execSystem ] 139:  oal_sys_disableInternetLed cmd is &quot;echo &quot;0 0&quot; &gt; /proc/tplink/led_internet&quot;

[ util_execSystem ] 139:  oal_sys_disableInternetLed cmd is &quot;echo &quot;0 0&quot; &gt; /proc/tplink/led_internet&quot;

[ util_execSystem ] 139:  oal_sys_disableInternetLed cmd is &quot;echo &quot;0 0&quot; &gt; /proc/tplink/led_internet&quot;

[ util_execSystem ] 139:  oal_sys_disableInternetLed cmd is &quot;echo &quot;0 0&quot; &gt; /proc/tplink/led_internet&quot;

&lt;/pre&gt;&lt;/small&gt;}}

===See also===
*[[TP-LINK TL-WR840N v4]]
*[[TP-LINK TL-WR841N v13.x]]
*[[TP-LINK TL-WR841N v14.x]]
*[[TP-LINK TL-MR3420N v5]]

==Images==
&lt;gallery&gt;
File:GD25Q32CSIG.jpeg|TL-WR840N(RU) Ver:5.0 Flash GD25Q32CSIG
&lt;/gallery&gt;

__NOTOC__</text>
      <sha1>3unmj7hglxnxhzckz616i7v11eqvybq</sha1>
    </revision>
  </page>