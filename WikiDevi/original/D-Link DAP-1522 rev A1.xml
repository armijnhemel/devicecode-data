<page>
    <title>D-Link DAP-1522 rev A1</title>
    <ns>0</ns>
    <id>49447</id>
    <revision>
      <id>241676</id>
      <parentid>241675</parentid>
      <timestamp>2019-07-05T00:45:28Z</timestamp>
      <contributor>
        <username>imported&gt;M86</username>
        <id>0</id>
      </contributor>
      <minor/>
      <comment>Text replacement - &quot;speed=10/100/1000&quot; to &quot;speed=1G&quot;</comment>
      <origin>241676</origin>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text bytes="17190" sha1="k4djs8zcb3k27hdr9puacqw1q6m3d22" xml:space="preserve">{{Wireless embedded system
|brand=D-Link
|model=DAP-1522
|revision=A1
|upc=790069311864
|ean=
|asin=B001769K3O
|price=
|est_release_date=
|fcc_date=03/19/2008
|manuf_country=China
|is_manuf=No
|manuf=Alpha Networks
|manuf_model=WAP-ND01
|manuf_rev=
|availability=
|type=access point,bridge
|fcc_id=KA2AP1522A1
|ic_id=4216A-AP1522
|us_id=
|pwr_v=5
|pwr_amp=2
|pwr_conn=barrel
|cpu1_brand=Ralink
|cpu1_model=RT2880
|cpu1_cspeed=
|fla1=4
|fla1_brand=Spansion
|fla1_model=S29AL032D90TFI04
|ram1=32
|ram1_brand=ProMOS
|ram1_model=V54C3256164VDI7
|expansion_if_types=
|expansion_usb_num=
|jtag=
|serial=
|wi1_chip1_brand=Ralink
|wi1_chip1_model=RT2880
|wi1_chip2_brand=Ralink
|wi1_chip2_model=RT2850
|wi1_802dot11_protocols=abgn
|wi1_ant_conn=U.FL
|wi1_txchains=2
|wi1_rxchains=2
|wi1_sstreams=2
|eth_none=
|eth_cpu=true
|sw_cpu=
|sw_brand=Realtek
|sw_model=RTL8366SR
|lan_speed=1G
|lan_ports=4
|wan_ports=
|addl_chips=
|flags=
|stock_os=Linux;2.4.30;
|tp_firmware=
|802dot11_protocols=abgn
|default_ssid=dlink
|default_ssid_regex=^dlink$
|default_ip=192.168.0.50
|default_user=admin
|default_pass=
|oui=00:22:B0, 00:26:5A, 34:08:04
|oui_eth=00:22:B0, 00:26:5A, 34:08:04
}}
{{TagLine|Xtreme N Duo Wireless Bridge/Access Point}}
:{{SupportPage|vendor=D-Link|model=DAP-1522|vs_id=663}}

OEM/ODM: [[Alpha Networks]] WAP-ND01 (8WAPND01.1)

The third receive chain appears to be disabled (despite there being 
:three U.FL connectors, there are only two antennas pictured in 
:the FCC internal photos and the test report states 2T2R status).
{{WDTOC|embedded}}
===GPL Code===
*[http://tsd.dlink.com.tw/downloads2008list.asp?OS=GPL D-link GPL site]
*[https://mega.co.nz/#!GZVUDBDD!EjRumlhi6b4ik8bs0OBm6C4O4BNkZWTyJCeSB_RoMNk dap1522_v121_gpl_20090901_full.tar.gz (79.3 MB mega.co.nz)]
*[https://mega.co.nz/#!2N1gURbb!axmJuUhuX3ggx7tQhg-M9iAsGNlPZQNvejGaRdaH0Zk dap-1522_A1_gpl_1.11_.zip (72.2 MB mega.co.nz)]
*[ftp://ftp.dlink.co.uk/wireless/dap-1522/dap-1522_A1_gpl_1.11_.zip dap-1522_A1_gpl_1.11_.zip (ftp.dlink.co.uk)]
*[ftp://ftp.dlink.fr/GPL_Source_Codes/DAP-1522_GPL/dap1522_v111_gpl.tar.bz2 dap1522_v111_gpl.tar.bz2 (ftp.dlink.fr)]

===EEPROM===
*[https://mega.co.nz/#!eRkkVShT!KAheXGN-6E6ebRB4r8qgKVI5Vv8scU3IiB2DL7kpYwQ RT2880_eeprom_v1_0.bin (512 B mega.co.nz)]
===MTD===
*[https://mega.co.nz/#!GFdSxRYL!EW-okDgxzvOvXoVkcmn35meUvDoLWvpR2dFd6xTvfJg mtd_block.7z (3.7 MB mega.co.nz)]

===Serial===
====Pinout====
Header J1
&lt;pre&gt;Left &lt;--- [|Rx|___|3.3V|GND|Tx|] --&gt; Right&lt;/pre&gt;
57600n8
====Boot log====
{{SCollapse|Boot log
|&lt;small&gt;&lt;pre&gt;
U-Boot 1.1.3 (Jun  3 2008 - 15:48:40) Build 001--ALPHA_v011
Board: RT2880 DRAM:  32 MB
        twe0 set to &lt;NULL&gt;
        toe0 set to &lt;NULL&gt;
        Set up sector start address BC400000
============================================
ASIC -VerB/C (MAC to MAC Mode)
DRAM COMPONENT=256Mbits
DRAM BUS=16BIT
Total memory = 32Mbytes
Date:Jun  3 2008  Time:15:48:40
============================================
Eth0 (10/100-M)
Hit any key to stop autoboot:  0
## Booting image at bc440000 ...
   Image Name:   7zip Linux Kernel
   Created:      1970-01-01   0:00:00 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    -1 Bytes = 4096 MB
   Load Address: 8a000000
   Entry Point:  8a000000
   Uncompressing Kernel Image with LZMA ...
OK

Starting kernel ...
THIS IS ASIC - VERSION B
ramsize = 32 MBytes
rambase not set, set to default (0x08000000)
MEMORY DESCRIPTOR dump:
[0,8a1ef950]: base&lt;0a000000&gt; size&lt;02000000&gt; type&lt;Free RAM memory&gt;

 The CPU feqenuce set to 266 MHz
CPU revision is: 0001906c
icache: sets:256, ways:4, linesz:16 ,total:16384, waybit:12, flags:0x0
dcache: sets:256, ways:4, linesz:16 ,total:16384, waybit:12, flags:0x0
i waysize = 4096, d waysize = 4096, i sets= 256, d sets=256
Primary instruction cache 16kB, physically tagged, 4-way, linesize 16 bytes.
Primary data cache 16kB, 4-way, linesize 16 bytes.
[setup_scache]:1032
Linux version 2.4.30 (freddy@RangeRover) 
(gcc version 3.3.5) #1 Fri Jan 14 10:42:49 CST 2011
Determined physical RAM map:
 memory: 02000000 @ 0a000000 (usable)
On node 0 totalpages: 49152
zone(0): 49152 pages.
zone(1): 0 pages.
zone(2): 0 pages.
Kernel command line: console=ttyS1,57600n8 root=/dev/mtdblock1 noinitrd
cause = 70c0807c, status = 1000ff00
calculating r4koff... 002896a0(2660000)
CPU frequency 266.00 MHz
Using 133.000 MHz high precision timer.
Calibrating delay loop... 265.42 BogoMIPS
Memory: 28652k/32768k available (1518k kernel code, 
4116k reserved, 92k data, 68k init, 0k highmem)
Dentry cache hash table entries: 32768 (order: 6, 262144 bytes)
Inode cache hash table entries: 16384 (order: 5, 131072 bytes)
Mount cache hash table entries: 512 (order: 0, 4096 bytes)
Buffer cache hash table entries: 16384 (order: 4, 65536 bytes)
Page-cache hash table entries: 65536 (order: 6, 262144 bytes)
Checking for 'wait' instruction...  unavailable.
POSIX conformance testing by UNIFIX
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
Starting kswapd
devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)
devfs: boot_options: 0x1
squashfs: version 3.1 (2006/08/19) Phillip Lougher
pty: 256 Unix98 ptys configured
Ralink RT2880 gpio driver initialized
Serial driver version 5.05c (2001-07-08) with no serial options enabled
ttyS00 at 0x300500 (irq = 9) is a 16550A
ttyS01 at 0x300c00 (irq = 8) is a 16550A
RA2880 Ethernet Driver Initilization. v1.01  256 rx/tx descriptors allocated!
FLASH_API: MAN_ID=1 DEV_ID=22F9 SIZE=4MB
 Amd/Fujitsu Extended Query Table v1.1 at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling fast programming due to code brokenness.
Flash device: 0x400000 at 0xbc400000
ELBOX Physically mapped flash: squashfs filesystem found at block 832
Creating 8 MTD partitions on &quot;ELBOX Physically mapped flash&quot;:
0x000d0080-0x00400000 : &quot;rootfs&quot;
0x00040000-0x003e0000 : &quot;upgrade&quot;
0x003f0000-0x00400000 : &quot;rgdb&quot;
0x00030000-0x00040000 : &quot;bdcfg&quot;
0x003e0000-0x003f0000 : &quot;langpack&quot;
0x00000000-0x00400000 : &quot;flash&quot;
0x00000000-0x00030000 : &quot;Boot&quot;
0x00030000-0x00032000 : &quot;Boot Config&quot;
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP
IP: routing cache hash table of 2048 buckets, 16Kbytes
TCP: Hash tables configured (established 16384 bind 32768)
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
NET4: Ethernet Bridge 008 for NET4.0
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Load RT2880 Timer Module(Wdg/Soft)
VFS: Mounted root (squashfs filesystem) readonly.
Mounted devfs on /dev
Freeing prom memory: 0kb freed
Freeing unused kernel memory: 68k freed
console started
trying to start /sbin/init
init started:  BusyBox v1.00 (2011.01.14-02:45+0000) multi-call binary
Starting pid 10, console /dev/tts/1: '/etc/init.d/rcS'
Algorithmics/MIPS FPU Emulator v1.5
[/etc/init.d/S03config.sh]
Mounting proc and var ...
Inserting modules ...
Start xmldb ...
[/etc/scripts/misc/profile.sh] get ...
[/etc/scripts/misc/defnodes.sh] ...
[/etc/defnodes/S10setnodes.sh] ...
PHP [/etc/defnodes/S11setnodes.php] ...
PHP [/etc/defnodes/S12features.php] ...
PHP [/etc/defnodes/S20setnodes.php] ...
SQUASHFS error: Can't find a SQUASHFS superblock on mtdblock(31,5)
mount: Mounting /dev/mtdblock/5 on /www/locale/alt failed: Invalid argument
PHP [/etc/defnodes/S40brand.php] ...
[/etc/scripts/misc/defnodes.sh] Done !!
[/etc/templates/timezone.sh] ...
[/etc/templates/logs.sh] ...
[/var/run/logs_run.sh] ...
Inserting modules ...
insmod: /lib/modules/2.4.30: No such file or directory
Using /lib/modules/si2c.o
RTL8366SR i2cphy...
Phy init failed!!
Phy init retry success!!
RGMII phy data=10c
Set RGMII delay time SUCCESS
MDIO_CFG = 1f01dc01
GDMA1_FWD_CFG = 10000
rt2880_eth_setup: DSP_EN OFF version driver
[/etc/init.d/S03config.sh] done!
[/etc/init.d/S10system.sh]
start Layout ...
[/etc/scripts/layout.sh] ...
[/var/run/layout_start.sh] ...
Start bridge layout ...
device eth0 entered promiscuous mode
br0: port 1(eth0) entering learning state
br0: port 1(eth0) entering forwarding state
br0: topology change detected, propagating
start LAN ...
[/etc/templates/lan.sh] ...
[/var/run/lan_start.sh] ...
Bridge mode selected, LAN is disabled !
start web server ...
[/etc/templates/webs.sh] start ...
[/var/run/webs_start.sh] ...
Starting HTTPD ...
start fresetd ...
enable LAN ports ...
Factory reset time : 5 secs
System reset time  : 1 secs
WPS command : [/etc/templates/wps.sh pbc &amp;]
[/etc/scripts/enlan.sh] ...
 Generate channel table according to the country code...
start WAN ...
Set WAN port media type 0
Set WAN port greenethernet type 1
Enable green ethernet successed.
[/etc/templates/wan.sh] start ...
[/var/run/wan_start.sh] ...
Bridge mode selected !
DHCP client on WAN(br0) CloneMAC() ...
start telnet daemon ...
Start telnetd ...
start DHCP server
[/etc/templates/dhcpd.sh] ...
[/var/run/dhcpd_restart.sh] ...
Stop DHCP server (br0) ...
never heard of command [dhcp_server_enable]
commands:
        addbr           &lt;bridge&gt;                add bridge
        addif           &lt;bridge&gt; &lt;device&gt;       add interface to bridge
        delbr           &lt;bridge&gt;                delete bridge
        delif           &lt;bridge&gt; &lt;device&gt;       delete interface from bridge
        show                                    show a list of bridges
        showmacs        &lt;bridge&gt;                show a list of mac addrs
        showstp         &lt;bridge&gt;                show bridge stp info

        setageing       &lt;bridge&gt; &lt;time&gt;         set ageing time
        setbridgeprio   &lt;bridge&gt; &lt;prio&gt;         set bridge priority
        setfd           &lt;bridge&gt; &lt;time&gt;         set bridge forward delay
        setgcint        &lt;bridge&gt; &lt;time&gt;         set garbage collection interval
        sethello        &lt;bridge&gt; &lt;time&gt;         set hello time
        setmaxage       &lt;bridge&gt; &lt;time&gt;         set max message age
        setpathcost     &lt;bridge&gt; &lt;port&gt; &lt;cost&gt;  set path cost
        setportprio     &lt;bridge&gt; &lt;port&gt; &lt;prio&gt;  set port priority
        stp             &lt;bridge&gt; &lt;state&gt;        turn stp on/off
        apmode          &lt;bridge&gt; &lt;state&gt;        pass AP operation mode to bridge
        setprimaryvid           &lt;bridge&gt; &lt;vid&gt;  set primary vlan ID
        igmp_snooping           &lt;bridge&gt; &lt;state&gt;        turn igmp snooping on/off
        deliver_control         &lt;bridge&gt; &lt;state&gt;        turn deliver_controlk on/off
        setmataddr      &lt;bridge&gt; &lt;address&gt;      set mac cloning address
        setmatmode      &lt;bridge&gt; &lt;state&gt;        set mac cloning mode
        scanlanmacs     &lt;bridge&gt;                scan lan port mac address
        setwpsstat      &lt;bridge&gt;                set current wps work status
        showmataddr     &lt;bridge&gt;                show current ra0 address
        block_aparray   &lt;bridge&gt; &lt;state&gt;                set this if aparray is enabled
        block_neap      &lt;bridge&gt; &lt;state&gt;                set this if aparray is enabled
Start DHCP server (br0) ...
start NEAP ...
[/etc/templates/neaps.sh] start ...
[/var/run/neaps_start.sh] ...
Start Neap Server ...
start NEAPC ...
[/etc/templates/neapc.sh] start ...
[/var/run/neapc_start.sh] ...
not pure AP mode, so disable AP ARRAY ...
Start NeapC Client ...
aparraymsg: not found
: cannot create
Stop apneaps Server ...
: not found
start Microsoft LLDP ...
[/etc/templates/lld2d.sh] ...
/var/run/wlan_stop.sh: cannot open
[/etc/templates/wan.sh] restart ...
[/var/run/lld2d_start.sh] ...
Start LLD2 daemon ...
[/var/run/wan_stop.sh] ...
Bridge mode selected !
Stop DHCP client on WAN(br0) ...
start NetBIOS ...
[/etc/templates/netbios.sh] ...
[/var/run/netbios_start.sh] ...
Enable NetBIOS!
[/etc/templates/wandown.sh] ...
[/etc/init.d/S10system.sh] done!
rcS done!
Starting pid 497, console /dev/tts/1: '/bin/sh'

BusyBox v1.00 (2011.01.14-02:45+0000) Built-in shell (msh)
Enter 'help' for a list of built-in commands.

# [/var/run/wan_down.sh] ...
[/etc/templates/upnpd.sh] ...
[/var/run/wan_start.sh] ...
Bridge mode selected !
DHCP client on WAN(br0) CloneMAC() ...
[/etc/templates/wlan.sh] ...
[/etc/templates/wlan_run.sh] start ...
[/var/run/wlan_start.sh] ...
Start WLAN interface ra0 ...
WLAN is disabled !
[/etc/templates/qos.sh] restart ...
[/etc/templates/wan.sh] restart ...
[/var/run/wan_stop.sh] ...
Bridge mode selected !
Stop DHCP client on WAN(br0) ...
[/etc/templates/wandown.sh] ...
[/var/run/qos_start.sh] ...
Interface is wanif=eth0 wlanif=ra0... OK
Start QOS system ...
QOS is disabled, because WLAN setting.
[/etc/templates/trafficmgr.sh] restart ...
[/var/run/wan_down.sh] ...
[/etc/templates/upnpd.sh] ...
[/var/run/wan_start.sh] ...
Bridge mode selected !
Start WAN(br0),192.168.0.50/255.255.255.0 ...
[/etc/templates/wanup.sh] ...
[/var/run/wan_up.sh] ...
[/etc/templates/ntp.sh] ...
NTP client is disabled ...
[/etc/templates/upnpd.sh] ...
[/var/run/upnpd_start.sh] ...
Starting UPnP ...
[/var/run/trafficmgr_start.sh] ...
Interface is wanif=v_eth0 wlanif=v_ra0... OK
Start traffic manager system ...
traffic manager is disabled.
&lt;/pre&gt;&lt;/small&gt;}}

===U-boot===
====Menu====
Type &quot;q&quot; to escape automatic boot and reach U-boot's prompt.

====help====
&lt;small&gt;&lt;pre&gt;
RT2880 # ?
?       - alias for 'help'
base    - print or set address offset
bdinfo  - print Board Info structure
boot    - boot default, i.e., run 'bootcmd'
bootd   - boot default, i.e., run 'bootcmd'
bootm   - boot application image from memory
bootp   - boot image via network using BootP/TFTP protocol
bootvmlinux - Boot from an vmlinux in memory
cache_set   - Specify the header segment size in byte !!
cmp     - memory compare
coninfo - print console devices and information
cp      - memory copy
crc32   - checksum calculation
echo    - echo args to console
erase   - erase FLASH memory
flinfo  - print FLASH memory information
go      - start application at address 'addr'
rt2880_hdrlen   - Specify the header segment size in byte !!
help    - print online help

iminfo  - print header information for application image
loadb   - load binary file over serial line (kermit mode)
loop    - infinite loop on address range
md      - memory display
mdio   - Ralink PHY register R/W command !!
mm      - memory modify (auto-incrementing)
mtest   - simple RAM test
mw      - memory write (fill)
nm      - memory modify (constant address)
pci   - Display to all DMA status  !!
printenv- print environment variables
protect - enable or disable FLASH write protection
pse_reset  !!
rarpboot- boot image via network using RARP/TFTP protocol
reset   - Perform RESET of the CPU
run     - run commands in an environment variable
saveenv - save environment variables to persistent storage
sdd   - Display to all DMA status  !!
sdp   -
sdram_width   - Specify the SDRAM bus width !!
setenv  - set environment variables
sleep   - delay execution for some time
tftpboot- boot image via network using TFTP protocol
version - print monitor version
&lt;/pre&gt;&lt;/small&gt;

====printenv====
&lt;small&gt;&lt;pre&gt;
RT2880 # printenv
loadstart=0x8A100000
runtimeloadstart=0x8A000000
bootstart=0xBC400000
bootsize=0x30000
bootend=0xBC42FFFF
runtimestart=0xBC440000
runtimesize=0x3B0000
runtimeend=0xBC7EFFFF
envstart=0xBC430000
envend=0xBC43FFFF
bootcmd=run runtime
bootdelay=1
baudrate=57600
ethaddr=&quot;00:AA:BB:CC:DD:11&quot;
ipaddr=192.168.1.10
serverip=192.168.1.250
preboot=echo;echo
update_bootloader=protect off $(bootstart) $(bootend);erase $(bootstart) $(bootend);cp.b $(loadstart) $(bootstart) $(bootsize)
update_runtime=protect off $(runtimestart) $(runtimeend);erase $(runtimestart) $(runtimeend);cp.b $(loadstart) $(runtimestart) $(runtimesize)
clean_env=protect off $(envstart) $(envend); erase $(envstart) $(envend);protect on $(envstart) $(envend)
runtime=bootm $(runtimestart) $(runtimeloadstart)
ethact=Eth0 (10/100-M)
signature=wapnd01_dlink_dap1522
stdin=serial
stdout=serial
stderr=serial
Environment size: 868/8188 bytes
&lt;/pre&gt;&lt;/small&gt;

===Partitions===
&lt;small&gt;&lt;pre&gt;
dev:    size   erasesize  name
mtd0: 00400000 00010000 &quot;ELBOX Physically mapped flash&quot;
mtd1: 0032ff80 00010000 &quot;rootfs&quot;
mtd2: 003a0000 00010000 &quot;upgrade&quot;
mtd3: 00010000 00010000 &quot;rgdb&quot;
mtd4: 00010000 00010000 &quot;bdcfg&quot;
mtd5: 00010000 00010000 &quot;langpack&quot;
mtd6: 00400000 00010000 &quot;flash&quot;
mtd7: 00030000 00010000 &quot;Boot&quot;
mtd8: 00002000 00010000 &quot;Boot Config&quot;

Creating 8 MTD partitions on &quot;ELBOX Physically mapped flash&quot;:
0x000d0080-0x00400000 : &quot;rootfs&quot;
0x00040000-0x003e0000 : &quot;upgrade&quot;
0x003f0000-0x00400000 : &quot;rgdb&quot;
0x00030000-0x00040000 : &quot;bdcfg&quot;
0x003e0000-0x003f0000 : &quot;langpack&quot;
0x00000000-0x00400000 : &quot;flash&quot;
0x00000000-0x00030000 : &quot;Boot&quot;
0x00030000-0x00032000 : &quot;Boot Config&quot;
&lt;/pre&gt;&lt;/small&gt;

===mounts===
&lt;pre&gt;
rootfs / rootfs rw 0 0
/dev/root / squashfs ro 0 0
none /dev devfs rw 0 0
none /proc proc rw 0 0
ramfs /var ramfs rw 0 0
&lt;/pre&gt;

==Images==
&lt;gallery caption=&quot;internal&quot;&gt;
File:DAP-1522-A1 Board top.jpg|Board top
File:DAP-1522-A1 SoC.jpg|Soc
FIle:DAP-1522_RT2850L.JPG|WiFi
File:DAP-1522-A1 Flash.jpg|Flash
File:DAP-1522-A1 RAM.jpg|RAM
File:DAP-1522-A1 Switch.jpg|Switch
File:DAP-1522-A1 Serial.jpg|Serial:&lt;br&gt; White - (Rx)&lt;br&gt; Red - [3.3V]&lt;br&gt; Green - (GND)&lt;br&gt; Black - (Tx)&lt;br&gt;57600n8
File:DAP-1522-A1 P-N.jpg|P/N
File:DAP-1522-A1 Board bottom.jpg|Board bottom
&lt;/gallery&gt;[[Has images::internal| ]]</text>
      <sha1>k4djs8zcb3k27hdr9puacqw1q6m3d22</sha1>
    </revision>
  </page>