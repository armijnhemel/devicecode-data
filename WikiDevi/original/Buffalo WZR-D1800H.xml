<page>
    <title>Buffalo WZR-D1800H</title>
    <ns>0</ns>
    <id>53433</id>
    <revision>
      <id>380105</id>
      <parentid>272671</parentid>
      <timestamp>2022-11-08T16:52:30Z</timestamp>
      <contributor>
        <username>RogueScholar</username>
        <id>156</id>
      </contributor>
      <comment>Add FreshTomato third-party firmware support</comment>
      <origin>380105</origin>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text bytes="14227" sha1="k908m3so8xmh6fpyo3z5cr0ncr14i52" xml:space="preserve">{{Wireless embedded system
|brand=Buffalo
|model=WZR-D1800H
|series=AC1750
|upc=747464125138
|asin=B0084JFLSK
|is_manuf=No
|manuf=Arcadyan
|manuf_model=WA9116B
|manuf_rev=AC33
|availability=common
|price=180
|est_release_date=05/14/2012
|fcc_date=04/20/2012
|fcc_id=FDI-09101695-0
|ic_id=6102A-041
|pcb_id=141911620002J
|type=wireless router
|pwr_v=12
|pwr_amp=3
|pwr_conn=barrel
|cpu1_brand=Broadcom
|cpu1_model=BCM4706
|fla1=128
|fla1_brand=Samsung
|fla1_model=K9F1G08U0D-SCB0
|ram1=128
|ram1_brand=EtronTech
|ram1_model=EM68B16CWQD-25H
|ram1_num=2
|expansion_if_types=Mini PCIe, USB 2.0
|expansion_minipcie_num=2
|expansion_usb_num=1
|serial=yes,, 10-pin header,, unpopulated,, (115200,8,N,1)
|wi1_module=Arcadyan WN8833B-GN
|wi1_module_if=Mini PCIe
|wi1_chip1_brand=Broadcom
|wi1_chip1_model=BCM4331
|wi1_802dot11_protocols=bgn
|wi1_ant_conn=U.FL
|wi1_txchains=3
|wi1_rxchains=3
|wi1_sstreams=3
|wi2_module=Arcadyan WN8833B-AC
|wi2_module_if=Mini PCIe (oversized)
|wi2_chip1_brand=Broadcom
|wi2_chip1_model=BCM4360
|wi2_802dot11_protocols=an+ac
|wi2_ant_conn=U.FL
|wi2_txchains=3
|wi2_rxchains=3
|wi2_sstreams=3
|eth_cpu=true
|sw_brand=Broadcom
|sw_model=BCM53125
|lan_speed=1G
|lan_ports=4
|wan_speed=1G
|wan_ports=1
|stock_boot=CFE
|stock_os=Linux
|tp_firmware=DD-WRT, DD-WRT (kongac), FreshTomato
|802dot11_protocols=abgn+ac
|default_ssid=BUFFALO-XXXXXX_A, BUFFALO-XXXXXX_G
|default_ssid_regex=^BUFFALO-[A-F0-9]{6}_A$,,, ^BUFFALO-[A-F0-9]{6}_G$
|default_ip=192.168.11.1
|default_user=admin
|default_pass=password
|oui=10:6F:3F
|oui_eth=10:6F:3F
}}
{{TagLine|AirStation AC1300/N900 Gigabit Dual Band Wireless Router}}
:[http://www.buffalotech.com/products/wireless/wireless-routers/airstation-ac1300-n900-gigabit-dual-band-wireless-router-wzr-d1800h/ Product page] {{•}} [http://www.buffalotech.com/files/products/WZR-D1800H_datasheet_1.pdf Datasheet]

&quot;P/N: 141911620002J R0A&quot; is silkscreened on the main board.&lt;br&gt;
&quot;P/N: 141883320000J R0A&quot; is silkscreened on the 2.4GHz wireless module.
:This device is [[Broadcom]] based. OEM [[Arcadyan]]. 

The BCM4331 wireless module uses 3x [[Skyworks]] (SiGe) SE2594L 
:(Dual Band 802.11a/b/g/n Wireless LAN Front End)
The BCM4360 wireless module uses 3x [[Skyworks]] (SiGe) SE5003L 
:(5GHz, 23dBm Power Amp w/ Power Detector)

*[http://openwrt.org/toh/buffalo/wzr-d1800h On the '''OpenWrt''' wiki]
:Per the lspci dump, the BCM4360 has the PCI ID of '''14e4:43a2'''

===Reviews===
*[http://news.cnet.com/8301-17938_105-57441253-1/buffalo-airstation-wzr-d1800h-revew-802.11ac-performance-inconclusive/ Reviewed on '''C|Net''']
*[http://www.smallnetbuilder.com/wireless/wireless-reviews/31754-draft-80211ac-revealed-buffalo-wzr-d1800h-airstation-reviewed-part-1 Review on '''SmallNetBuilder''', part 1]
*[http://www.smallnetbuilder.com/wireless/wireless-reviews/31766-draft-80211ac-goes-the-distance-buffalo-wzr-d1800h-airstation-reviewed-part-2 Review on '''SmallNetBuilder''', part 2] (10:6F:3F OUI)
:The ''[[Arcadyan]]'' model of the device ''may'' be WG9116AAC-J6.
:&quot;P/N: 141911620002J R01&quot; is silkscreened on the main board.
:&quot;P/N: 141883320008J&quot; is silkscreened on the 5GHz wireless module.
:The silkscreened manuf. date code is '''1215''' (third week of ''April'').
:Default SSIDs appear to be '''BUFFALO-XXXXXX_A''' and '''BUFFALO-XXXXXX_G''' 
::(upper case letters, LAN MAC is probably the MAC used for both).

===Forum threads===
*[http://www.dd-wrt.com/phpBB2/viewtopic.php?t=154644 On the '''DD-WRT''' forums], [http://www.dd-wrt.com/phpBB2/viewtopic.php?t=155100 and another post with the initial test build]
:Not bundled with DD-WRT, but work has been completed to support, 
:see [http://www.dd-wrt.com/phpBB2/viewtopic.php?t=155100 this thread] for the latest test build.

===News===
*[http://www.buffalotech.co.uk/buffalo-showcases-cutting-edge-wireless-technology.html ''Buffalo showcases cutting-edge wireless technology'']

===See also===
*[[Buffalo AirStation WSR-1166DHP]] • [[Arcadyan]] WG9115AAC22
*[[Buffalo WZR-600DHP2]] • [[Arcadyan]] WG9116H22 (BCM47081A0)
*[[Buffalo WZR-900DHP]] • [[Arcadyan]] WG9116H33 (BCM47081A0)
*[[Buffalo WZR-1166DHP]] • [[Arcadyan]] WG9117EAC22 (BCM4708A0)
*[[Buffalo WZR-1750DHP]] • [[Arcadyan]] WG9117GAC33 (BCM4708A0)
*[[Buffalo WZR-D1800H]] • [[Arcadyan]] WA9116BAC33 (BCM4706)

==Flashing==
{{Flashnotice}}
===Flashing DD-WRT===
{{DDWRTNotice|beta}}
nvram shows as 256 KB with DD-WRT installed

* .bin files are for initial flash, .trx files are for [[#Upgrading DD-WRT|upgrading]].

# Do a [[WikiDevi:DD-WRT/Hard reset or 30/30/30|Hard Reset]]
# Upload [http://www.dd-wrt.com/phpBB2/download.php?id=24671 DD-WRT] via GUI
# Do a [[WikiDevi:DD-WRT/Hard reset or 30/30/30|Hard Reset]]

==Upgrading==
===Upgrading DD-WRT===
* trx files are for upgrading, bin files are for [[#Flashing DD-WRT|initial flash]].

# Do a [[WikiDevi:DD-WRT/Hard reset or 30/30/30|Hard Reset]]
# Upload [http://www.dd-wrt.com/phpBB2/download.php?id=24670 DD-WRT] via GUI
# Do a [[WikiDevi:DD-WRT/Hard reset or 30/30/30|Hard Reset]]

==Reverting==
===Reverting from DD-WRT to OEM firmware===
# Do a [[WikiDevi:DD-WRT/Hard reset or 30/30/30|Hard Reset]]
# Upload [http://www.dd-wrt.com/phpBB2/download.php?id=24165 Buffalo Firmware] via GUI
# Do a [[WikiDevi:DD-WRT/Hard reset or 30/30/30|Hard Reset]]

==JTAG-Serial Info==
*[http://codechief.wordpress.com/tag/buffalo-wzr-d1800h/ ''Good info on opening this unit''] Will post here ASAP
*[http://codechief.wordpress.com/2013/06/06/de-bricking-a-buffalo-wifi-router-with-an-arduino/ ''De-bricking a Buffalo wifi router'']

===Serial===
====Serial Pinouts====
:J9
&lt;pre style=&quot;border: solid thin gray; font-size:90%; width:200px; overflow:auto;&quot;&gt;
 1 o VCC
 2 o GND
 3 o RX
 4 o TX
&lt;/pre&gt;&lt;!--
{{Serial TTL Setup WinXP
|serialport       = 
|serial_port_num  = 
|serial_speed     = 
|serial_data_bits = 
|serial_parity    = 
|serial_stop_bits = 
|serial_flow_cntl = 
}}--&gt;
==USB Info==
{{USB dd-wrt}}

==Images==
&lt;center&gt;'''Buffalo's Images'''&lt;gallery&gt;
File:Buffalo_WZR-D1800H_1.jpg|angled
File:Buffalo_WZR-D1800H_2.jpg|front
File:Buffalo_WZR-D1800H_3.jpg|front on side
File:Buffalo_WZR-D1800H_4.jpg|back
File:Buffalo_WZR-D1800H_5.jpg|side
File:Buffalo_WZR-D1800H_6.jpg|angled2
&lt;/gallery&gt;&lt;/center&gt;[[Has images::retail| ]]

&lt;center&gt;'''FCCID {{fccid|FDI-09101695-0}}'''&lt;gallery&gt;
File:FCCID_FDI-09101695-0_001.png|WZR-D1800H
File:FCCID_FDI-09101695-0_002.png|WZR-D1800H
File:FCCID_FDI-09101695-0_003.png|WZR-D1800H
File:FCCID_FDI-09101695-0_004.png|WZR-D1800H
File:FCCID_FDI-09101695-0_005.png|WZR-D1800H
File:FCCID_FDI-09101695-0_010.png|Both
File:FCCID_FDI-09101695-0_011.png|Both
File:FCCID_FDI-09101695-0_012.png|Both
File:FCCID_FDI-09101695-0_013.png|Both
File:FCCID_FDI-09101695-0_014.png|Both
File:FCCID_FDI-09101695-0_015.png|Both
File:FCCID_FDI-09101695-0_016.png|Both
File:FCCID_FDI-09101695-0_017.png|WZR-D1800H
File:FCCID_FDI-09101695-0_018.png|WZR-D1800H
File:FCCID_FDI-09101695-0_019.png|WZR-D1800H
File:FCCID_FDI-09101695-0_020.png|WZR-D1800H
File:FCCID_FDI-09101695-0_021.png|WZR-D1800H
File:FCCID_FDI-09101695-0_022.png|WZR-D1800H
File:FCCID_FDI-09101695-0_023.png|WZR-D1800H
File:FCCID_FDI-09101695-0_024.png|WZR-D1800H
File:FCCID_FDI-09101695-0_025.png|WZR-D1800H
File:FCCID_FDI-09101695-0_026.png|WZR-D1800H
File:FCCID_FDI-09101695-0_027.png|WZR-D1800H
File:FCCID_FDI-09101695-0_028.png|WZR-D1800H
File:FCCID_FDI-09101695-0_029.png|WZR-D1800H
File:FCCID_FDI-09101695-0_030.png|WZR-D1800H
File:FCCID_FDI-09101695-0_031.png|WZR-D1800H
File:FCCID_FDI-09101695-0_032.png|WZR-D1800H
File:FCCID_FDI-09101695-0_033.png|WZR-D1800H
File:FCCID_FDI-09101695-0_034.png|WZR-D1800H
File:FCCID_FDI-09101695-0_035.png|WZR-D1800H
File:FCCID_FDI-09101695-0_036.png|WZR-D1800H
File:FCCID_FDI-09101695-0_037.png|WZR-D1800H
File:FCCID_FDI-09101695-0_038.png|WZR-D1800H
File:FCCID_FDI-09101695-0_039.png|WZR-D1800H
File:FCCID_FDI-09101695-0_040.png|WZR-D1800H
File:FCCID_FDI-09101695-0_041.png|WZR-D1800H
File:FCCID_FDI-09101695-0_042.png|WZR-D1800H
File:FCCID_FDI-09101695-0_043.png|WZR-D1800H
File:FCCID_FDI-09101695-0_044.png|WZR-D1800H
File:FCCID_FDI-09101695-0_045.png|WZR-D1800H
File:FCCID_FDI-09101695-0_046.png|WZR-D1800H
File:FCCID_FDI-09101695-0_047.png|WZR-D1800H
File:FCCID_FDI-09101695-0_048.png|WZR-D1800H
File:FCCID_FDI-09101695-0_049.png|WZR-D1800H
File:FCCID_FDI-09101695-0_050.png|WZR-D1800H
File:FCCID_FDI-09101695-0_051.png|WZR-D1800H
File:FCCID_FDI-09101695-0_052.png|WZR-D1800H
File:FCCID_FDI-09101695-0_053.png|WZR-D1800H
File:FCCID_FDI-09101695-0_054.png|WZR-D1800H
File:FCCID_FDI-09101695-0_055.png|WZR-D1800H
File:FCCID_FDI-09101695-0_056.png|WZR-D1800H
File:FCCID_FDI-09101695-0_057.png|WZR-D1800H
File:FCCID_FDI-09101695-0_058.png|WZR-D1800H
File:FCCID_FDI-09101695-0_058.png|WZR-D1800H
File:FCCID_FDI-09101695-0_059.png|WZR-D1800H
File:FCCID_FDI-09101695-0_060.png|WZR-D1800H
File:FCCID_FDI-09101695-0_061.png|WZR-D1800H
File:FCCID_FDI-09101695-0_062.png|WZR-D1800H
File:FCCID_FDI-09101695-0_063.png|WZR-D1800H
File:FCCID_FDI-09101695-0_064.png|WZR-D1800H
File:FCCID_FDI-09101695-0_065.png|WZR-D1800H
File:FCCID_FDI-09101695-0_066.png|WZR-D1800H
File:FCCID_FDI-09101695-0_067.png|WZR-D1800H
File:FCCID_FDI-09101695-0_068.png|WZR-D1800H
File:FCCID_FDI-09101695-0_124.png|WZR-D1800H
WLI-H4-D1300
File:FCCID_FDI-09101695-0_006.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_007.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_008.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_009.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_069.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_070.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_071.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_072.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_073.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_074.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_075.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_076.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_077.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_078.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_079.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_080.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_081.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_082.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_083.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_084.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_085.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_086.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_087.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_088.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_089.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_090.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_091.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_092.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_093.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_094.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_095.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_096.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_097.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_098.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_099.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_100.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_101.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_102.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_103.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_104.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_105.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_106.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_107.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_108.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_109.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_110.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_111.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_112.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_113.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_114.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_115.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_116.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_117.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_118.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_119.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_120.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_121.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_122.png|WLI-H4-D1300
File:FCCID_FDI-09101695-0_123.png|WLI-H4-D1300
&lt;/gallery&gt;&lt;/center&gt;[[Has images::fcc| ]]

==Notes==
===jffs Issue in DD-WRT===
This problem is caused by the firmware encountering an unmarked bad block during an 
:erase operation while attempting to setup a JFFS2 filesystem on device /dev/mtd/4.

Most people will probably never experience this problem. The [[Asus RT-AC66U|AC66U]], the D1800H, and 
:the Buffalo [[Buffalo AirStation WLI-H4-D1300|WLI-H4-D1300 Media Bridge]] use the same Samsung flash memory chip. 
In case, 4 of 5 D1800H's had the problem but [[Buffalo AirStation WLI-H4-D1300|D1300]] didn't. Neither of [[Asus RT-AC66U|AC66U]]'s had the problem. 
:One person on one of the [[Asus RT-AC66U|AC66U]] threads reported having the problem; here's a link to his post.

If you have the problem, you will not be able to create or copy directories and files to /jffs.
:Here are some example error messages: (this list was shortened to save space - it can go on for several pages)

&lt;div style=&quot;border: solid thin gray; overflow:auto;&quot;&gt;&lt;syntaxhighlight lang=&quot;bash&quot;&gt;
root@WZR-D1800HRT2:~# dmesg|grep jffs
jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x05ee0020: 0xe952 instead
jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x05ee0024: 0x0e6d instead
jffs2: Further such events for this erase block will not be printed
jffs2: Old JFFS2 bitmask found at 0x05efc7fc
jffs2: You cannot use older JFFS2 filesystems with newer kernels
jffs2: Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes
jffs2: empty_blocks 379, bad_blocks 1, c-&gt;nr_blocks 760
&lt;/syntaxhighlight&gt;&lt;/div&gt;

Also the Status -&gt; Router webpage will show that JFFS2 has no free space.

To fix this problem try the following at a command line prompt:

&lt;div style=&quot;border: solid thin gray; overflow:auto;&quot;&gt;&lt;syntaxhighlight lang=&quot;bash&quot;&gt;
flash_erase -j /dev/mtd/4 0 0 &amp;&amp; reboot
&lt;/syntaxhighlight&gt;&lt;/div&gt;

This command erases and marks bad any bad blocks encountered so that they can be &quot;skipped&quot; 
:and formats the partition to JFFS2 specifications. 
I believe the firmware uses the mtd erase command which seems to fail at handling bad blocks. 
:The flash_erase command needs to be run only once.

- '''Magnetron1.1'''

__NOTOC__</text>
      <sha1>k908m3so8xmh6fpyo3z5cr0ncr14i52</sha1>
    </revision>
  </page>