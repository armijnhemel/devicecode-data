<page>
    <title>Linksys WRT54G v4</title>
    <ns>0</ns>
    <id>2893</id>
    <revision>
      <id>378964</id>
      <parentid>365051</parentid>
      <timestamp>2024-08-16T02:21:26Z</timestamp>
      <contributor>
        <username>ShadowBot</username>
        <id>3357272</id>
      </contributor>
      <minor/>
      <comment>/* top */clean up, replaced: hynix → SK hynix, SK SK hynix → SK hynix</comment>
      <origin>378964</origin>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text bytes="15550" sha1="l9cmqjn2tlpqezngxp77upc8yulwqfb" xml:space="preserve">{{Infobox Embedded System
|image1             = Linksys WRT54G-02.jpg
|image1_size        = 200px
|caption            = Wireless-G Broadband Router
|caption2           = &lt;!-- 2nd tagleine --&gt;
|pp                 = &lt;!-- product page url only --&gt;
|sp                 = http://support.linksys.com/us/support-product?pid=01t80000003KXPxAAO
|dl                 = http://support.linksys.com/en-us/wireless/lbc/WRT54G/download
|fandom             = Linksys_WRT54G_v4.0
|wikidevi           = Linksys_WRT54G_v4.0
|wikipedia          = &lt;!-- [[wikipedia:Main Page|Wikipedia]] Leave blank for none --&gt;
|ddwrtsupport       = Supported
|openwrtsupport     = Supported
|tomatosupport      = Supported
|gargoylesupport    = Supported

|brand              = Linksys
|model              = WRT54G
|submodelappend     = &lt;!-- yes, for space --&gt;
|submodel           = &lt;!-- SubModel number, Leave blank for unknown --&gt;
|revision           = v4
|subrevision        = &lt;!-- Model Subrevision, Leave blank for none or unknown --&gt;
|model_part_num     = 
|page_start_date    = 08/25/2010
|page_start_origon  = https://infodepot.fandom.com/wiki/Linksys_WRT54G_v4.0
|wlclass            = G54
|series             = WRT54G
|type               = wireless router
|sernum             = CDFA
|fcc_id             = Q87-WT54GV40
|icid               = &lt;!-- Industry Canada Identification number, Leave blank for unknown --&gt;
|us_id              = &lt;!-- US ID --&gt;
|boardid            = &lt;!-- Board Identification, Leave blank for none --&gt;
|ecc_id             = &lt;!-- eec-id --&gt;

|cpu1chip1          = Broadcom;BCM5352E;BCM5352EKPB;(BCM5352 chip rev 0 SoC);
|cpu1_cores         = 1
|cpu1_type          = MIPS
|cpu1_type_rev      = BMIPS3300 (R1)
|cpu1spd            = 200 &lt;!-- 200 MHz --&gt;
|is_doc             = 
|bus                = &lt;!-- 8-bit, 16-bit, 32-bit, 64-bit, Leave blank for none --&gt;

|flash1type         = &lt;!-- Parallel,Serial(SPI),NAND,Compact Flash --&gt;
|fla1_num           = &lt;!-- 1,2,3,4 --&gt;
|fla1chip           = Intel;TE28F320C3BD90;TE28F320 C3BD90 A4297351;
|flash1size         = 4

|ram1type           = &lt;!-- DDR,DDR2,DDR3,DDR4 --&gt;
|ram1type1          = &lt;!-- SO-DIMM,SDRAM --&gt;
|ram1spd            = &lt;!-- RAM speed --&gt;
|ram1size           = 16
|ram1chip           = SK hynix;HY5DU281622ET-J;522A HY5DU281622ET-J;
|ram1_num           = &lt;!-- Number of Ram chips --&gt;
|nvramsize          = 32

|eth_cpu            = true
|sw_cpu             = true
|wan_ports          = 1
|wan_speed          = 100MbE
|lan_ports          = 4
|lan_speed          = 100MbE
|ethstandard        = IEEE 802.3/3u
|portbasedvlan      = [http://www.dd-wrt.com/phpBB2/viewtopic.php?p=479766#479766 Yes] - via GUI and nvram
|802.1qvlan         = &lt;!-- Support for 802.1q vlan tagging, Leave blank for unknown --&gt;
|auto_mdix          = &lt;!-- mdix support --&gt;
|sup_jumbo          = &lt;!-- Jumbo frames support --&gt;
|ethoui             = 00:14:BF
|oui                = 00:14:BF

|bootwait           = &lt;!-- On or Off, Leave blank for unknown --&gt;
|stockbootloader    = CFE;;;
|stockos            = Linux;;;

|exp_if_types       = none

|pwr_volt_type      = VDC
|pwr_vdc            = 12
|pwr_amp_dc         = 1
|pwr_conn           = barrel
|pwr_barrel_outer   = 5
|pwr_barrel_inner   = 2.5
|pwr_barrel_len     = 12
|pwr_pol            = &lt;!-- Connector polarity --&gt;

|serial             = yes,, 10-pin header,, unpopulated,,, (115200 8N1)
|jtag               = yes,, 12-pin header,, unpopulated

|specialfeat        = &lt;!-- Features that don't fit any place else, Leave blank for none --&gt;
|flags              = &lt;!-- flags, Leave blank for none --&gt;
|addchip            = &lt;!-- Additional Chips --&gt;
|802dot11_protocols = bg

|defaulip           = 192.168.1.1
|defaultlogin       = &lt;!-- Leave blank --&gt;
|defaultpass        = admin
|defaultssid        = linksys
|defaultssid_regex  = 
|default_ch         = 6
|manuf              = CyberTAN
|manuf_model        = &lt;!-- Manufacturer Model --&gt;
|manuf_rev          = &lt;!-- Manufacturer Revision --&gt;
|tpfirmware         = Broadband-Hamnet, DD-WRT, Gargoyle, OpenWrt, Tomato, TomatoUSB

|availability       = Discontinued
|eoldate            = &lt;!-- End of Life date --&gt;
|fccapprovdate      = 05/31/2005
|estreldate         = &lt;!-- Estimated release date --&gt;
|estprice           = &lt;!-- Estimated retail price in US dollars --&gt;
|upc                = &lt;!-- UPC number --&gt;
|ean                = &lt;!-- EAN number --&gt;
|dx_sku             = &lt;!-- DealExtreme sku --&gt;
|newegg             = &lt;!-- newegg item number --&gt;
|asin               = &lt;!-- ASIN number --&gt;
|asin_country       = &lt;!-- ASIN country --&gt;
|asin2              = &lt;!-- ASIN number --&gt;
|asin_country2      = &lt;!-- ASIN country --&gt;
|countrymanuf       = China

|buttons            = &lt;!-- buttons available --&gt;
|led                = &lt;!-- Led colors and descriptions --&gt;
|dimensions         = 7.32&quot; x 1.89&quot; x 6.06&quot;
|weight             = &lt;!-- Weight of device {{convert|weight|oz|g}} --&gt;

|wi1_if_name        = 
|rad1chip1cpu       = true
|rad1chip2          = Broadcom;BCM2050;BCM2050KML;
|rad1oui            = &lt;!-- Only if different from above OUI --&gt;
|rad1_ant_conn      = RP-TNC
|rad1stand          = IEEE 802.11b/g
|rad1g              = 54
|rad1b              = 11
|rad1freq           = 2.4
|rad1correv         = 9
|rad1cap            = &lt;!-- radio capabilities, Leave blank for none or unknown --&gt;

}}{{WDTOC|embedded}}
==Overview==
{{seealso|Linksys WRT54G series}}

==Links of Interest==
*[http://downloads.linksys.com/downloads/datasheet/wrt54gv8-ds.pdf Datasheet.pdf]
*[http://downloads.linksys.com/downloads/quickinstall/1224638367420/WRT54G-v1.1_qi.pdf Quick Install.pdf]
*[http://downloads.linksys.com/downloads/userguide/WRT54G_UG_WEB_20070529.pdf User Guide.pdf]
*[http://en.wikipedia.org/wiki/Linksys_WRT54G_series ''WRT54G series'' on '''Wikipedia''']
*[http://www.dd-wrt.com/wiki/index.php/Linksys_WRT54G/GL/GS/GX ''Linksys WRT54Gxx page'' on the '''DD-WRT''' wiki]
*[http://wiki.openwrt.org/oldwiki/openwrtdocs/hardware/linksys/wrt54g ''WRT54G page'' on the '''OpenWrt''' wiki]

==Flashing==
{{Flashnotice}}
===Flashing DD-WRT===
{{DDWRTNotice|k24req}}
*[[dd-wrt-wiki:Linksys WRT54G v4.0|Linksys WRT54G v4.0 on the DD-WRT Wiki]]
{{ombox | type = speedy | text = &lt;font color=red&gt;'''WARNING:'''&lt;/font&gt; Only DD-WRT v23 and newer will run on this model. If you use an older version, you will need to [[dd-wrt-wiki:Recover from a Bad Flash|Recover from a Bad Flash]].}}

The stock firmware from Linksys on the WRT54G v4 won't accept a firmware image over 3MB in size (you will get the error: :&quot;Upgrade are failed!&quot; if you try) so you will need to flash the mini version of DD-WRT onto the router BEFORE flashing any other versions.

# Read the peacock announcement found here: http://www.dd-wrt.com/phpBB2/viewtopic.php?t-51486
# Do a [[TechInfoDepot:DD-WRT/Hard reset or 30/30/30|Hard reset or 30/30/30]] on the router according to note 1 of the peacock announcement (30/30/30)
# Set a static IP on your computer to 192.168.1.7. Subnet mask should be 255.255.255.0.
# Connect the lan cable from your computer to a LAN port of your router. Make sure your router is plugged in. Nothing should be connected to your computer or the router except the lan cable between them. Turn your firewall and any wireless computer connections OFF.
# Power cycle the router (uplug the power from the router for 30 seconds and then plug it back in)
# Open your browser to 192.168.1.1 by putting that in the browser address window of your browser. You should open the linksys webgui and NOT a page that says Management Mode. If you see management mode, power cycle the router again.
# Leave the username blank and enter &quot;admin&quot; as the password
# Go to administration and firmware upgrade
# Navigate to the folder that you are using, and select [ftp://dd-wrt.com/others/eko/BrainSlayer-V24-preSP2/09-08-09-r12874/broadcom/dd-wrt.v24_mini_generic.bin dd-wrt.v24_mini_generic.bin]
# Hit upgrade
# When you get a success, wait FIVE FULL minutes.
# If you don't get success, repeat from steps 6 up to this one. If you still don't get success, clear your browser cache. Try using a different browser as well, to navigate to 192.168.1.1.
# When you can access the dd-wrt webgui using a browser at 192.168.1.1, power cycle the router.
#When you can again access the dd-wrt webgui using a browser at 192.168.1.1, do another [[TechInfoDepot:DD-WRT/Hard reset or 30/30/30|Hard reset or 30/30/30]] on the router.
# At this point you can choose to put a different build on, depending on what you needs are.
# Reset your computer ethernet connection to auto IP and auto DNS
# Check for recommended builds [[TechInfoDepot:DD-WRT#Recommended Builds|here]].

===Flashing OpenWrt===
{{OpenWrtNotice|notrecommended}}
{{OpenWrtNotice|insufficient}}
{{OpenWrtNotice|endsupport|2022|19.07.10}}
{{OpenWrtNotice|broadcomwifi}}
{{OpenWrt
|techdata                  = https://openwrt.org/toh/hwdata/linksys/linksys_wrt54g_40
|wikipage                  = https://openwrt.org/toh/linksys/wrt54g
|forumpage                 = 
|forumpage2                = 
|forumpage3                = 
|github                    = 
|target                    = 
|subtarget                 = 
|arch                      = 
|support_started_version   = 0.9
|current_supported_version = 10.03.1
|unsupportedfuncntions     = 
|comment                   = 
}}
Please insert instructions here

===Flashing Tomato===
Please insert instructions here

===Flashing Gargoyle===
*[http://www.gargoyle-router.com/wiki/doku.php?id=install_guide Install Guide]

==Upgrading==
{{Upgrade dd-wrt}}

==Reverting==
# Read the peacock announcement found here: http://www.dd-wrt.com/phpBB2/viewtopic.php?t-51486
# Do a [[TechInfoDepot:DD-WRT/Hard reset or 30/30/30|Hard reset or 30/30/30]] on the router according to note 1 of the peacock announcement (30/30/30)
# Set a static IP on your computer to 192.168.1.7. Subnet mask should be 255.255.255.0.
# Connect the lan cable from your computer to a LAN port of your router. Make sure your router is plugged in. Nothing should be connected to your computer or the router except the lan cable between them. Turn your firewall and any wireless computer connections OFF.
# Power cycle the router (unplug the power from the router for 30 seconds and then plug it back in)
# Open your browser to 192.168.1.1 by putting that in the browser address window of your browser. You should open the linksys webgui and NOT a page that says Management Mode. If you see management mode, power cycle the router again.
# Enter your username and password
# Go to administration and firmware upgrade
# Navigate to the folder that you are using, and select [http://homedownloads.cisco.com/downloads/firmware/1224639846883/WRT54G_v4.21.1_fw.zip WRT54G_v4.21.1_fw.bin] once you've unzipped it.
# Hit upgrade
# When you get a success, wait FIVE FULL minutes.
# When you can again access the Linksys webgui using a browser at 192.168.1.1, do another [[TechInfoDepot:DD-WRT/Hard reset or 30/30/30|Hard reset or 30/30/30]] on the router.
# Reset your computer ethernet connection to auto IP and auto DNS.

==JTAG-Serial Info==
===JTAG===
====JTAG Pinouts====
&lt;pre style=&quot;border: solid thin gray; font-size:90%; width:200px; overflow:auto;&quot;&gt;
 nTRST   1o o2	GND
   TDI   3o o4	GND
   TDO   5o o6	GND
   TMS   7o o8	GND
   TCK   9o o10	GND
 nSRST  11o o12  N/C
&lt;/pre&gt;
'''Using [[TechInfoDepot:JTAG/TIAO/Universal JTAG User Manual (Parallel)|Universal JTAG Adapter]]'''
&lt;pre style=&quot;border: solid thin gray; font-size:90%; width:200px; overflow:auto;&quot;&gt;
 white    1o o2	 black
   red    3o o4	 GND
  blue    5o o6	 GND
 green    7o o8	 GND
 yelow    9o o10  GND
 orange  11o o12  N/C
&lt;/pre&gt;

==== DD-WRT Recovery ====
'''JTAG Recovery'''
* /noemw /nocwd switches required

# Backup CFE x2 (Compare the files, they must match exactly or there is something wrong with your JTAG setup)
# Erase Wholeflash x2
# Flash CFE
# Unplug Power
# Unplug JTAG Cable

'''TFTP'''
# Set Rig ip static 192.168.1.10
# Plug network cable from rig to port 1
# Get TFTP ready, server ip - 192.168.1.1, Password - ''blank'', file - [ftp://dd-wrt.com/others/eko/BrainSlayer-V24-preSP2/older/12-28-09-r13525/broadcom/dd-wrt.v24_mini_wrt54g.bin dd-wrt.v24_mini_wrt54g.bin]
# Plug in power
# As soon as windows says &quot;connected&quot; hit upgrade. May have to use a network hub to make sure windows is always connected.
# Hard Reset 30\30\30

===Serial===
====Serial Pinouts====
&lt;pre style=&quot;border: solid thin gray; font-size:90%; width:200px; overflow:auto;&quot;&gt;
 VCC  1 o o 2  VCC
 TX1  3 o o 4  TX0
 RX1  5 o o 6  RX0
 N/C  7 o o 8  N/C
 GND  9 o o 10 GND
&lt;/pre&gt;

====DD-WRT Serial Recovery====
{{Modified redhawk0 instructions|wrt54gv4}}

==vlan Info==
===DD-WRT vlan Info===
*[[TechInfoDepot:DD-WRT/VLAN Support]]

====Defaults====
&quot;/proc/switch/eth0&quot; exists

 1 2 3 4 | case labels
 3 2 1 0 | nvram port numbers

{{SCollapse|nvram show
|&lt;pre&gt;
root@DD-WRT:~# nvram show | grep vlan.ports
vlan1ports=4 5
vlan0ports=3 2 1 0 5*
size: 19872 bytes (12896 left)
root@DD-WRT:~# nvram show | grep port.vlans
port5vlans=0 1 16
port4vlans=0
port3vlans=0
port2vlans=0
port1vlans=0
port0vlans=1
size: 19872 bytes (12896 left)
root@DD-WRT:~# nvram show | grep vlan.hwname
vlan1hwname=et0
vlan0hwname=et0
size: 19872 bytes (12896 left)
root@DD-WRT:~# lsmod
Module Size Used by
ip_nat_pptp 2560 0 (unused)
ip_conntrack_pptp 3036 1
ip_nat_proto_gre 1664 0 (unused)
ip_conntrack_proto_gre 2584 0 [ip_nat_pptp ip_conntrack_pptp]
etherip 5104 0 (unused)
switch-robo 5356 0 (unused)
switch-core 6352 0 [switch-robo]
root@DD-WRT:~# ls /proc/switch
eth0
root@DD-WRT:~# cat /proc/switch/eth0/vlan/0/ports
0 1 2 3 5t*
root@DD-WRT:~# cat /proc/switch/eth0/vlan/1/ports
4 5t
root@DD-WRT:~# cat /proc/switch/eth0/vlan/2/ports
4
root@DD-WRT:~#
&lt;/pre&gt;

====nvram commands====
&lt;pre&gt;
root@DD-WRT:~# nvram set vlan1ports=&quot;3 4 5&quot;
root@DD-WRT:~# nvram set vlan0ports=&quot;2 1 0 5*&quot;
root@DD-WRT:~# nvram commit
root@DD-WRT:~# reboot
&lt;/pre&gt;

====nvram====
Port 1 moved to WAN vlan
&lt;pre&gt;
root@DD-WRT:~# nvram show | grep vlan.ports
vlan0ports=2 1 0 5*
vlan1ports=3 4 5
size: 19850 bytes (12918 left)
root@DD-WRT:~# nvram show | grep port.vlans
port5vlans=0 1 16
port3vlans=0
port1vlans=0
size: 19850 bytes (12918 left)
port4vlans=0
port2vlans=0
port0vlans=1
root@DD-WRT:~# nvram show | grep vlan.hwname
vlan1hwname=et0
size: 19850 bytes (12918 left)
vlan0hwname=et0
root@DD-WRT:~#
&lt;/pre&gt;

====GUI====
Port 4 moved to WAN vlan
&lt;pre&gt;
root@DD-WRT:~# nvram show | grep vlan.ports
vlan1ports=4 5
vlan0ports=3 2 1 0 5*
size: 20005 bytes (12763 left)
root@DD-WRT:~# nvram show | grep port.vlans
port5vlans=0 1 16
port4vlans=1 18 19
port3vlans=0 18 19
port2vlans=0 18 19
port1vlans=0 18 19
port0vlans=1 18 19
size: 20005 bytes (12763 left)
root@DD-WRT:~# nvram show | grep vlan.hwname
vlan1hwname=et0
vlan0hwname=et0
size: 20005 bytes (12763 left)
root@DD-WRT:~#
&lt;/pre&gt;}}

==Pictures==
&lt;center&gt;'''[[User:DarkShadow|DarkShadow's]] Unit'''
&lt;gallery mode=&quot;packed-hover&quot;&gt;
File:WRT54Gv40_a.JPG|Top
File:WRT54Gv40_b.JPG|Bottom
File:WRT54Gv40_c.JPG|Board Top
File:WRT54Gv40_f.JPG|Board Top 2
File:WRT54Gv40_g.JPG|Bottom JTAG &amp; Serial
File:WRT54Gv40_d.JPG|Chips
File:WRT54Gv40_e.JPG|JTAG &amp; Serial
File:WRT54Gv40_h.JPG|JTAG Bottom
&lt;/gallery&gt;&lt;/center&gt;[[Has images::internal| ]][[Has images::external| ]]
{{FCCID Q87-WT54GV40}}

==Notes==
===DD-WRT Troubleshooting===
* If your router fails to reboot (power light doesn't stop flashing, no web interface, etc) you will need to [[TechInfoDepot:DD-WRT/Recover from a Bad Flash|Recover from a Bad Flash]].

[[Category:English Documentation]]</text>
      <sha1>l9cmqjn2tlpqezngxp77upc8yulwqfb</sha1>
    </revision>
  </page>